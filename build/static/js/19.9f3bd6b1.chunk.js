(this["webpackJsonpgull-react"]=this["webpackJsonpgull-react"]||[]).push([[19,6],{1572:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(36),o=a(114),i=a(12),s=a(25),c=a.n(s),m=a(555),u=a(553),d=a(148),g=a(4),p=a.n(g),f=a(1),h=a(11),v=a(1562),x=a(1559),b=a(42),E=a(613),C=a.n(E),N=a(614),y=a.n(N),O=a(615),T=a.n(O),k=a(562),w=a(542),I=a(541),P=a(602),S=a(645),j=a(575),z=a.n(j),F=a(2),L=a.n(F),R=a(7),A=Object(l.b)((function(e){}),{setError:R.d})(Object(x.a)({form:"CompileLetterForm",validate:S.c})((function(e){var t=Object(i.g)(),a=e.taskId,n=e.role,l=e.letters.map((function(e,t){return{index:t+1,letter:{id:e.id,title:e.title},preview:"/letter/".concat(e.id)}})),o=[{dataField:"index",text:"No",sort:!0},{dataField:"letter",text:"Letter Template",formatter:function(e,t,a){return r.a.createElement(v.a,{name:"letterTemplate",label:e.title,radioValue:e.id,component:k.b})},sort:!0},{dataField:"preview",text:"Preview",formatter:function(e,t,a){return r.a.createElement("div",{className:"d-flex flex-wrap align-items-center"},r.a.createElement(w.a,{placement:"top",overlay:r.a.createElement(I.a,{id:"tooltip-top"},"Preview Letter Content")},r.a.createElement(b.a,{className:"p-2 btn-hover rounded-circle",to:e,target:"_blank"},r.a.createElement(P.f,{className:"cursor-pointer",size:24}))))}}],s={paginationSize:5,pageStartIndex:1,firstPageText:"First",prePageText:"Back",nextPageText:"Next",lastPageText:"Last",nextPageTitle:"First page",prePageTitle:"Pre page",firstPageTitle:"Next page",lastPageTitle:"Last page",showTotal:!0,totalSize:l.length};return r.a.createElement("form",{onSubmit:e.handleSubmit((function(r){z.a.fire({title:"Compiling letters...",text:"This might take a while, please be patience...",onBeforeOpen:function(){z.a.showLoading()},onOpen:function(){var l=Object(h.a)(p.a.mark((function l(){return p.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,r=Object(f.a)(Object(f.a)({},r),{},{taskId:a,role:n}),l.next=4,L()({method:"POST",url:"".concat("https://peia-iam.herokuapp.com/api","/letters/compile"),data:r}).then((function(e){"success"===e.data.message&&(z.a.hideLoading(),z.a.fire({title:"Successfully Compile and Sent Letters",icon:"success",allowOutsideClick:!1}).then((function(e){t.push("/assignment/".concat(a))})))}));case 4:l.next=10;break;case 6:l.prev=6,l.t0=l.catch(0),z.a.hideLoading(),e.setError(l.t0);case 10:case"end":return l.stop()}}),l,null,[[0,6]])})));return function(){return l.apply(this,arguments)}}(),allowOutsideClick:!1})}))},r.a.createElement(T.a,{striped:!0,keyField:"index",data:l,columns:o,search:!0},(function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,Object.assign({},e.baseProps,{bootstrap4:!0,pagination:y()(s),noDataIndication:"Table is empty",wrapperClasses:"table-responsive"})))})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("button",{type:"submit",className:"btn btn-primary m-1 mt-4"},"Compile Letter"))))}))),M=a(955);t.default=Object(l.b)((function(e){return{assignmentTask:e.compileLetter.assignmentResult.assignmentTask?e.compileLetter.assignmentResult.assignmentTask:{},assignmentResult:e.compileLetter.assignmentResult,letterTemplates:e.compileLetter.letterTemplates,httpError:e.error.error,loading:e.loading.loading}}),{getCompileLetterInfo:d.b,resetError:R.c})((function(e){var t=Object(i.h)().role,a=Object(i.h)().taskId;return Object(n.useEffect)((function(){e.getCompileLetterInfo(t,a)}),[]),r.a.createElement("div",null,e.loading&&r.a.createElement(m.a,null),r.a.createElement(u.a,{error:e.httpError,onConfirm:e.resetError}),r.a.createElement(o.a,{routeSegments:[{name:"Assignment Tasks",path:"/assignment"},{name:"Assignment Tasks List",path:"/assignment/list"},{name:e.assignmentTask.title,path:"/assignment/".concat(a)},{name:"Compile Letter"}]}),r.a.createElement(o.e,{title:"Letter Template",subtitle:"Please select the letter template"},r.a.createElement(A,{letters:e.letterTemplates,taskId:a,role:t}),r.a.createElement("div",{className:"custom-separator"}),r.a.createElement("h4",null,"Summary of Assignment Result: ",c.a.startCase(t)),r.a.createElement(M.a,{results:e.assignmentResult.results?e.assignmentResult.results:[]})))}))},553:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(569),o=a.n(l);t.a=function(e){return r.a.createElement(o.a,{show:!!e.error,title:"An Error Occured",type:"error",text:e.error?e.error.response?e.error.response.data.message:e.error.message:"",onConfirm:function(){return e.onConfirm()}})}},555:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l={position:"fixed",left:0,right:0,top:"calc(50% - 20px)",margin:"auto",height:"40px",width:"40px",zIndex:324324324},o={position:"fixed",left:0,top:0,height:"100%",width:"100%",zIndex:324324323,backgroundColor:"white"};t.a=function(){return r.a.createElement("div",{style:o},r.a.createElement("div",{style:l},r.a.createElement("div",{className:"spinner spinner-bubble spinner-bubble-primary"})))}},558:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=[{id:"01",title:"Assignment Task Title",value:"title"},{id:"02",title:"Exam Type",value:"examType"},{id:"04",title:"Assigned Exam Center Name",value:"assignmentResults[assignmentResultIndex].results[resultIndex].examCenter.school.schoolName"},{id:"05",title:"Assigned School Code",value:"assignmentResults[assignmentResultIndex].results[resultIndex].examCenter.school.schoolCode"},{id:"06",title:"Assigned Exam Center Code",value:"assignmentResults[assignmentResultIndex].results[resultIndex].examCenter.examCenterCode"},{id:"07",title:"Role",value:"assignmentResults[assignmentResultIndex].role"},{id:"08",title:"Invigilator Name",value:"assignmentResults[assignmentResultIndex].results[resultIndex].invigilators[invigilatorIndex].teacherName"},{id:"09",title:"Invigilator IC",value:"assignmentResults[assignmentResultIndex].results[resultIndex].invigilators[invigilatorIndex].icNumber"}]},562:function(e,t,a){"use strict";a.d(t,"d",(function(){return g})),a.d(t,"f",(function(){return p})),a.d(t,"c",(function(){return f})),a.d(t,"g",(function(){return h})),a.d(t,"a",(function(){return x})),a.d(t,"e",(function(){return b})),a.d(t,"h",(function(){return C})),a.d(t,"b",(function(){return N}));var n=a(6),r=a(0),l=a.n(r),o=a(584),i=a.n(o),s=a(114),c=a(1562),m=a(558),u=a(1560),d=function(e){if(e.touched&&e.error)return l.a.createElement("div",{className:"text-danger mt-1 ml-2"},e.error)},g=function(e){return l.a.createElement("div",{className:"form-group ".concat(e.className||"")},l.a.createElement("input",Object.assign({readOnly:e.readOnly,type:e.type},e.input,{placeholder:e.placeholder,className:"form-control"})),l.a.createElement("small",{className:"ul-form__text form-text "},e.helpText),d(e.meta))},p=function(e){return l.a.createElement("div",{className:"form-group ".concat(e.className||"")},l.a.createElement("select",Object.assign({className:"form-control"},e.input,{onChange:e.input.onChange}),l.a.createElement("option",{value:""},e.defaultOption),e.items.map((function(e){return l.a.createElement("option",{key:e.id,value:e.value},e.title)}))),l.a.createElement("small",{className:"ul-form__text form-text "},e.helpText),d(e.meta))},f=function(e){return l.a.createElement("div",{className:"form-group ".concat(e.className||"")},l.a.createElement(i.a,{name:e.name,closeOnSelect:!0,onChange:e.input.onChange,isValidDate:e.isValidDate,timeFormat:"HH:mm",dateFormat:"DD/MM/YYYY",placeholder:e.placeholder,value:e.input.value}),l.a.createElement("small",{className:"ul-form__text form-text "},e.helpText),d(e.meta))},h=function(e){return l.a.createElement("div",{className:"form-group ".concat(e.className||"")},l.a.createElement("label",{className:"ul-form__label"},"Exam Centers: "),l.a.createElement("div",{className:"row"},e.items.map((function(t,a){return l.a.createElement("div",{className:"form-group col-md-6",key:a},l.a.createElement("label",{className:"checkbox checkbox-primary"},l.a.createElement("input",{type:"checkbox",name:"".concat(e.input.name,"[").concat(a,"]"),value:t.id,checked:-1!==e.input.value.indexOf(t.id),onChange:function(a){var r=Object(n.a)(e.input.value);return a.target.checked?r.push(t.id):r.splice(r.indexOf(t.id),1),e.input.onChange(r)}}),l.a.createElement("span",null,"".concat(t.school.schoolCode," - ").concat(t.examCenterCode," - ").concat(t.school.schoolName)),l.a.createElement("span",{className:"checkmark"})))}))),d(e.meta))},v=function(e){return l.a.createElement("div",{className:"form-group ".concat(e.className||"")},l.a.createElement("select",Object.assign({},e.input,{className:"form-control",onChange:e.input.onChange}),e.options.map((function(t){return t.user.school.id!==e.assigningSchoolId&&l.a.createElement("option",{key:t.id,value:t.id},"".concat(t.teacherName," - ").concat(t.user.school.schoolCode))}))),d(e.meta))},x=function(e){return l.a.createElement("div",{className:"col-md-4"},l.a.createElement("label",{className:"ul-form__label"},e.label),l.a.createElement("div",{className:"row"},e.fields.map((function(t,a){return l.a.createElement(c.a,{key:t,className:"col-lg-12",name:t,options:e.options,assigningSchoolId:e.schoolId,component:v})}))))},b=function(e){return l.a.createElement("div",{className:"col-md-12"},l.a.createElement(s.e,{title:e.title,subtitle:e.subtitle},l.a.createElement(s.d,Object.assign({},e.input,{content:e.input.value,handleContentChange:e.input.onChange,placeholder:e.placeholder}))),d(e.meta))},E=function(e){return l.a.createElement("div",{className:"form-group ".concat(e.className||"")},l.a.createElement("div",{className:"row"},l.a.createElement("label",{className:"ul-form__label ul-form--margin col-lg-1 col-form-label "},e.label),l.a.createElement("div",{className:"col-lg-8"},l.a.createElement("select",Object.assign({className:"form-control"},e.input,{onChange:e.input.onChange}),l.a.createElement("option",{value:""},e.defaultOption),e.items.map((function(e){return l.a.createElement("option",{key:e.id,value:e.value},e.title)})))),l.a.createElement("div",{className:"col-lg-3"},l.a.createElement("button",{type:"button",className:"btn btn-danger m-1",onClick:function(){var t="&lt;"+(e.index+1)+"&gt;",a=e.letterContent.replace(t,"");if(e.index<e.fieldLength)for(var n=e.index+1;n<e.fieldLength;n++){var r="&lt;"+(n+1)+"&gt;",l="&lt;"+n+"&gt;";a=a.replace(r,l)}e.changeFunction("content",a),e.onRemoveTag(e.index)}},"Remove Tag"))),d(e.meta))},C=function(e){return l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement("button",{type:"button",className:"btn btn-outline-secondary m-1",onClick:function(){var t;e.fields.push({}),t=e.letterContent?e.letterContent+"&lt;"+(e.fields.length+1)+"&gt;":"&lt;"+(e.fields.length+1)+"&gt;",e.changeFunction("content",t)}},"Add New Tag")),l.a.createElement("div",{className:"custom-separator"}),e.fields.map((function(t,a){return l.a.createElement(c.a,{key:a,className:"col-md-12",label:"<".concat(a+1,">"),name:"".concat(t,".value"),component:E,defaultOption:"Please select a field",onRemoveTag:e.fields.remove,changeFunction:e.changeFunction,letterContent:e.letterContent,index:a,fieldLength:e.fields.length,items:m.a})})))},N=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(u.a.Check,Object.assign({type:"radio",label:e.label},e.input,{value:e.radioValue})),d(e.meta))}},602:function(e,t,a){"use strict";a.d(t,"b",(function(){return m})),a.d(t,"c",(function(){return u})),a.d(t,"g",(function(){return d})),a.d(t,"a",(function(){return g})),a.d(t,"d",(function(){return p})),a.d(t,"f",(function(){return f})),a.d(t,"e",(function(){return h}));var n=a(0),r={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},l=n.createContext&&n.createContext(r),o=function(){return(o=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},i=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&(a[n[r]]=e[n[r]])}return a};function s(e){return function(t){return n.createElement(c,o({attr:o({},e.attr)},t),function e(t){return t&&t.map((function(t,a){return n.createElement(t.tag,o({key:a},t.attr),e(t.child))}))}(e.child))}}function c(e){var t=function(t){var a,r=e.size||t.size||"1em";t.className&&(a=t.className),e.className&&(a=(a?a+" ":"")+e.className);var l=e.attr,s=e.title,c=i(e,["attr","title"]);return n.createElement("svg",o({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,l,c,{className:a,style:o({color:e.color||t.color},t.style,e.style),height:r,width:r,xmlns:"http://www.w3.org/2000/svg"}),s&&n.createElement("title",null,s),e.children)};return void 0!==l?n.createElement(l.Consumer,null,(function(e){return t(e)})):t(r)}function m(e){return s({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}}]})(e)}function u(e){return s({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"}}]})(e)}function d(e){return s({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.65 10C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H17v4h4v-4h2v-4H12.65zM7 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"}}]})(e)}function g(e){return s({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"}}]})(e)}function p(e){return s({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}}]})(e)}function f(e){return s({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}}]})(e)}function h(e){return s({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"}}]})(e)}},645:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return l})),a.d(t,"c",(function(){return o}));var n=a(53),r=function(e){var t={};return e.title||(t.title="Please enter the title"),e.examType&&""!==e.examType||(t.examType="Please select the exam type"),e.collectionDate||(t.collectionDate="Please select the deadline of data collection"),(!e.examCenters||e.examCenters.length<=1)&&(t.examCenters="Must select at least two exam center"),t},l=function(e){var t={};for(var a in e)t[a]=new Array(e[a].length);var r=!1;for(var l in e){var o,i=e[l],s=Object(n.a)(i);try{for(s.s();!(o=s.n()).done;){var c=o.value;if(i.indexOf(c)!==i.lastIndexOf(c)){t[l][i.indexOf(c)]="The invigilator cannot be the same",t[l][i.lastIndexOf(c)]="The invigilator cannot be the same",r=!0;break}for(var m in e)if(m!==l){var u,d=e[m],g=Object(n.a)(d);try{for(g.s();!(u=g.n()).done;){if(c===u.value){t[l][i.indexOf(c)]="The invigilator cannot be the same",t[m][d.indexOf(c)]="The invigilator cannot be the same",r=!0;break}}}catch(p){g.e(p)}finally{g.f()}}}}catch(p){s.e(p)}finally{s.f()}if(r)break}return t},o=function(e){var t={};return e.letterTemplate||(t.letterTemplate="Please select the letter template"),t}},955:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(613),o=a.n(l),i=a(614),s=a.n(i),c=a(615),m=a.n(c),u=a(190),d=a(542),g=function(e){return r.a.createElement(d.a,{trigger:"hover",placement:"auto",overlay:function(e){return r.a.createElement(u.a,Object.assign({id:"popover-basic"},e),r.a.createElement(u.a.Header,{as:"h3"},"Original School Information"),r.a.createElement(u.a.Body,null,"School Code: ",e.schoolCode," ",r.a.createElement("br",null),"School Name: ",e.schoolName))}({schoolCode:e.invigilator.user.school.schoolCode,schoolName:e.invigilator.user.school.schoolName}),delay:{show:250,hide:400}},r.a.createElement("div",null,e.invigilator.teacherName))};t.a=function(e){var t=e.results,a=[{dataField:"index",text:"No",sort:!0},{dataField:"examCenter.school.schoolCode",text:"Assigned School Code",sort:!0},{dataField:"examCenter.examCenterCode",text:"Assigned Exam Center Code",sort:!0},{dataField:"examCenter.school.schoolName",text:"Assigned School Name",sort:!0},{dataField:"invigilator",text:"Invigilator",sort:!0,formatter:function(e,t,a){return r.a.createElement(g,{invigilator:e})},sortValue:function(e,t){return e.teacherName}},{dataField:"invigilator.icNumber",text:"I.C."},{dataField:"invigilator.teacherSex",text:"Gender",sort:!0},{dataField:"invigilator.teacherEmailAddress",text:"Email"}],n={paginationSize:5,pageStartIndex:1,firstPageText:"First",prePageText:"Back",nextPageText:"Next",lastPageText:"Last",nextPageTitle:"First page",prePageTitle:"Pre page",firstPageTitle:"Next page",lastPageTitle:"Last page",showTotal:!0,totalSize:t.length};return r.a.createElement(m.a,{striped:!0,keyField:"index",data:t,columns:a,search:!0},(function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(o.a,Object.assign({},e.baseProps,{bootstrap4:!0,pagination:s()(n),noDataIndication:"Table is empty",wrapperClasses:"table-responsive"})))}))}}}]);
//# sourceMappingURL=19.9f3bd6b1.chunk.js.map