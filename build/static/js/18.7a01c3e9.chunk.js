(this["webpackJsonpgull-react"]=this["webpackJsonpgull-react"]||[]).push([[18],{1553:function(e,t,a){"use strict";a.r(t);var n=a(4),l=a.n(n),o=a(11),c=a(0),r=a.n(c),s=a(12),m=a(36),i=a(213),d=a(114),u=a(627),h=a(1562),p=a(789),f=a(1559),E=a(575),g=a.n(E),N=a(2),v=a.n(N),x=a(555),b=a(553),C=a(850),y=a(562),P=a(851),w=a(647),S=a(107),k=a(7),O=a(648),T=Object(p.a)("NewSchool");t.default=Object(m.b)((function(e){return{showModal:e.newSchool.showModal,schools:e.newSchool.schools,schoolCode:T(e,"schoolCode"),httpError:e.error.error,loading:e.loading.loading}}),{toggleSchoolListModal:S.d,getAllSchools:S.c,resetError:k.c,setError:k.d})(Object(f.a)({form:"NewSchool",validate:w.b})((function(e){var t=Object(s.g)();Object(c.useEffect)((function(){e.getAllSchools()}),[]);return r.a.createElement("div",null,e.loading&&r.a.createElement(x.a,null),r.a.createElement(b.a,{error:e.httpError,onConfirm:e.resetError}),r.a.createElement(d.a,{routeSegments:[{name:"Schools & Exam Centers",path:"/examcenter"},{name:"New School"}]}),r.a.createElement("div",{className:"2-columns-form-layout"},r.a.createElement("div",{className:""},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header bg-transparent"},r.a.createElement("h3",{className:"card-title"}," New School")),r.a.createElement("form",{onSubmit:e.handleSubmit((function(a){g.a.fire({title:"Registering new school...",onBeforeOpen:function(){g.a.showLoading()},onOpen:function(){var n=Object(o.a)(l.a.mark((function n(){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,v()({method:"POST",url:"".concat("https://peia-iam.herokuapp.com/api","/schools"),data:a}).then((function(e){g.a.hideLoading(),g.a.fire({title:"Successfully Register School",icon:"success",html:Object(i.renderToStaticMarkup)(r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Exam Secretary Account"),r.a.createElement("p",null,"Username: ",e.data.login),r.a.createElement("p",null,"Password: ",e.data.password))),allowOutsideClick:!1}).then((function(e){t.push("/school/list")}))}));case 3:n.next=8;break;case 5:n.prev=5,n.t0=n.catch(0),e.setError(n.t0);case 8:case"end":return n.stop()}}),n,null,[[0,5]])})));return function(){return n.apply(this,arguments)}}(),allowOutsideClick:!1})}))},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row"},r.a.createElement(h.a,{className:"col-md-6",type:"text",name:"schoolCode",placeholder:"School Code",helpText:"Please enter an unique school code",component:y.d}),r.a.createElement("div",{className:"col-md-6 "},r.a.createElement(P.a,{items:e.schools,toggleModal:e.toggleSchoolListModal,showModal:e.showModal}),r.a.createElement(u.a,{className:"text-capitalize btn btn-dark ms-2",onClick:function(){e.schoolCode?Object(O.b)(e.schools,e.schoolCode)?g.a.fire("Unique","The school code - ".concat(e.schoolCode," is unique"),"success"):g.a.fire("Not Unique","The school code - ".concat(e.schoolCode," is not unique"),"error"):g.a.fire("No school code is entered","Please enter the school code first","warning")}},"Check Uniqueness"))),r.a.createElement("div",{className:"custom-separator"}),r.a.createElement("div",{className:"row"},r.a.createElement(h.a,{className:"col-md-6",type:"text",name:"schoolName",placeholder:"School Name",helpText:"Please enter the school name",component:y.d}),r.a.createElement(h.a,{className:"col-md-6",type:"text",name:"schoolAddress",placeholder:"School Address",helpText:"Please enter the school address",component:y.d})),r.a.createElement("div",{className:"custom-separator"}),r.a.createElement("div",{className:"row"},r.a.createElement(h.a,{className:"col-md-6",type:"text",name:"postcode",placeholder:"Postcode",helpText:"Please enter the postcode",component:y.d}),r.a.createElement(h.a,{className:"col-md-6",type:"text",name:"city",placeholder:"City",helpText:"Please enter the city",component:y.d})),r.a.createElement("div",{className:"custom-separator"}),r.a.createElement("div",{className:"row"},r.a.createElement(h.a,{className:"col-md-6",type:"text",name:"stateCode",placeholder:"State Code",helpText:"Please enter the state code",component:y.d}),r.a.createElement(h.a,{className:"col-md-6",type:"text",name:"areaCode",placeholder:"Area Code",helpText:"Please enter the area code",component:y.d})),r.a.createElement("div",{className:"custom-separator"}),r.a.createElement("div",{className:"row"},r.a.createElement(h.a,{className:"col-md-6",type:"text",name:"taxNumber",placeholder:"Tax Number",helpText:"Please enter the Tax Number",component:y.d}),r.a.createElement(h.a,{className:"col-md-6",name:"typeOfSchool",items:C.a,helpText:"Please select the type of school",defaultOption:"Please select type of school...",component:y.f})),r.a.createElement("div",{className:"custom-separator"}),r.a.createElement("div",{className:"row"},r.a.createElement(h.a,{className:"col-md-6",type:"text",name:"codeDun",placeholder:"Code DUN",helpText:"Please enter the code DUN",component:y.d}),r.a.createElement(h.a,{className:"col-md-6",type:"text",name:"codeParlimen",placeholder:"Code Parlimen",helpText:"Please enter the code Parlimen",component:y.d})),r.a.createElement("div",{className:"custom-separator"}),r.a.createElement("div",{className:"row"},r.a.createElement(h.a,{className:"col-md-6",type:"text",name:"schoolPhoneNumber",placeholder:"Phone Number",helpText:"Please enter the school phone number",component:y.d}),r.a.createElement(h.a,{className:"col-md-6",type:"email",name:"schoolEmailAddress",placeholder:"Email Address",helpText:"Please enter the school email address",component:y.d})),r.a.createElement("div",{className:"custom-separator"})),r.a.createElement("div",{className:"card-footer"},r.a.createElement("div",{className:"mc-footer"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("button",{type:"submit",className:"btn btn-primary m-1"},"Register School"))))))))))))})))},553:function(e,t,a){"use strict";var n=a(0),l=a.n(n),o=a(569),c=a.n(o);t.a=function(e){return l.a.createElement(c.a,{show:!!e.error,title:"An Error Occured",type:"error",text:e.error?e.error.response?e.error.response.data.message:e.error.message:"",onConfirm:function(){return e.onConfirm()}})}},555:function(e,t,a){"use strict";var n=a(0),l=a.n(n),o={position:"fixed",left:0,right:0,top:"calc(50% - 20px)",margin:"auto",height:"40px",width:"40px",zIndex:324324324},c={position:"fixed",left:0,top:0,height:"100%",width:"100%",zIndex:324324323,backgroundColor:"white"};t.a=function(){return l.a.createElement("div",{style:c},l.a.createElement("div",{style:o},l.a.createElement("div",{className:"spinner spinner-bubble spinner-bubble-primary"})))}},558:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=[{id:"01",title:"Assignment Task Title",value:"title"},{id:"02",title:"Exam Type",value:"examType"},{id:"04",title:"Assigned Exam Center Name",value:"assignmentResults[assignmentResultIndex].results[resultIndex].examCenter.school.schoolName"},{id:"05",title:"Assigned School Code",value:"assignmentResults[assignmentResultIndex].results[resultIndex].examCenter.school.schoolCode"},{id:"06",title:"Assigned Exam Center Code",value:"assignmentResults[assignmentResultIndex].results[resultIndex].examCenter.examCenterCode"},{id:"07",title:"Role",value:"assignmentResults[assignmentResultIndex].role"},{id:"08",title:"Invigilator Name",value:"assignmentResults[assignmentResultIndex].results[resultIndex].invigilators[invigilatorIndex].teacherName"},{id:"09",title:"Invigilator IC",value:"assignmentResults[assignmentResultIndex].results[resultIndex].invigilators[invigilatorIndex].icNumber"}]},562:function(e,t,a){"use strict";a.d(t,"d",(function(){return h})),a.d(t,"f",(function(){return p})),a.d(t,"c",(function(){return f})),a.d(t,"g",(function(){return E})),a.d(t,"a",(function(){return N})),a.d(t,"e",(function(){return v})),a.d(t,"h",(function(){return b})),a.d(t,"b",(function(){return C}));var n=a(6),l=a(0),o=a.n(l),c=a(584),r=a.n(c),s=a(114),m=a(1562),i=a(558),d=a(1560),u=function(e){if(e.touched&&e.error)return o.a.createElement("div",{className:"text-danger mt-1 ml-2"},e.error)},h=function(e){return o.a.createElement("div",{className:"form-group ".concat(e.className||"")},o.a.createElement("input",Object.assign({readOnly:e.readOnly,type:e.type},e.input,{placeholder:e.placeholder,className:"form-control"})),o.a.createElement("small",{className:"ul-form__text form-text "},e.helpText),u(e.meta))},p=function(e){return o.a.createElement("div",{className:"form-group ".concat(e.className||"")},o.a.createElement("select",Object.assign({className:"form-control"},e.input,{onChange:e.input.onChange}),o.a.createElement("option",{value:""},e.defaultOption),e.items.map((function(e){return o.a.createElement("option",{key:e.id,value:e.value},e.title)}))),o.a.createElement("small",{className:"ul-form__text form-text "},e.helpText),u(e.meta))},f=function(e){return o.a.createElement("div",{className:"form-group ".concat(e.className||"")},o.a.createElement(r.a,{name:e.name,closeOnSelect:!0,onChange:e.input.onChange,isValidDate:e.isValidDate,timeFormat:"HH:mm",dateFormat:"DD/MM/YYYY",placeholder:e.placeholder,value:e.input.value}),o.a.createElement("small",{className:"ul-form__text form-text "},e.helpText),u(e.meta))},E=function(e){return o.a.createElement("div",{className:"form-group ".concat(e.className||"")},o.a.createElement("label",{className:"ul-form__label"},"Exam Centers: "),o.a.createElement("div",{className:"row"},e.items.map((function(t,a){return o.a.createElement("div",{className:"form-group col-md-6",key:a},o.a.createElement("label",{className:"checkbox checkbox-primary"},o.a.createElement("input",{type:"checkbox",name:"".concat(e.input.name,"[").concat(a,"]"),value:t.id,checked:-1!==e.input.value.indexOf(t.id),onChange:function(a){var l=Object(n.a)(e.input.value);return a.target.checked?l.push(t.id):l.splice(l.indexOf(t.id),1),e.input.onChange(l)}}),o.a.createElement("span",null,"".concat(t.school.schoolCode," - ").concat(t.examCenterCode," - ").concat(t.school.schoolName)),o.a.createElement("span",{className:"checkmark"})))}))),u(e.meta))},g=function(e){return o.a.createElement("div",{className:"form-group ".concat(e.className||"")},o.a.createElement("select",Object.assign({},e.input,{className:"form-control",onChange:e.input.onChange}),e.options.map((function(t){return t.user.school.id!==e.assigningSchoolId&&o.a.createElement("option",{key:t.id,value:t.id},"".concat(t.teacherName," - ").concat(t.user.school.schoolCode))}))),u(e.meta))},N=function(e){return o.a.createElement("div",{className:"col-md-4"},o.a.createElement("label",{className:"ul-form__label"},e.label),o.a.createElement("div",{className:"row"},e.fields.map((function(t,a){return o.a.createElement(m.a,{key:t,className:"col-lg-12",name:t,options:e.options,assigningSchoolId:e.schoolId,component:g})}))))},v=function(e){return o.a.createElement("div",{className:"col-md-12"},o.a.createElement(s.e,{title:e.title,subtitle:e.subtitle},o.a.createElement(s.d,Object.assign({},e.input,{content:e.input.value,handleContentChange:e.input.onChange,placeholder:e.placeholder}))),u(e.meta))},x=function(e){return o.a.createElement("div",{className:"form-group ".concat(e.className||"")},o.a.createElement("div",{className:"row"},o.a.createElement("label",{className:"ul-form__label ul-form--margin col-lg-1 col-form-label "},e.label),o.a.createElement("div",{className:"col-lg-8"},o.a.createElement("select",Object.assign({className:"form-control"},e.input,{onChange:e.input.onChange}),o.a.createElement("option",{value:""},e.defaultOption),e.items.map((function(e){return o.a.createElement("option",{key:e.id,value:e.value},e.title)})))),o.a.createElement("div",{className:"col-lg-3"},o.a.createElement("button",{type:"button",className:"btn btn-danger m-1",onClick:function(){var t="&lt;"+(e.index+1)+"&gt;",a=e.letterContent.replace(t,"");if(e.index<e.fieldLength)for(var n=e.index+1;n<e.fieldLength;n++){var l="&lt;"+(n+1)+"&gt;",o="&lt;"+n+"&gt;";a=a.replace(l,o)}e.changeFunction("content",a),e.onRemoveTag(e.index)}},"Remove Tag"))),u(e.meta))},b=function(e){return o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-12"},o.a.createElement("button",{type:"button",className:"btn btn-outline-secondary m-1",onClick:function(){var t;e.fields.push({}),t=e.letterContent?e.letterContent+"&lt;"+(e.fields.length+1)+"&gt;":"&lt;"+(e.fields.length+1)+"&gt;",e.changeFunction("content",t)}},"Add New Tag")),o.a.createElement("div",{className:"custom-separator"}),e.fields.map((function(t,a){return o.a.createElement(m.a,{key:a,className:"col-md-12",label:"<".concat(a+1,">"),name:"".concat(t,".value"),component:x,defaultOption:"Please select a field",onRemoveTag:e.fields.remove,changeFunction:e.changeFunction,letterContent:e.letterContent,index:a,fieldLength:e.fields.length,items:i.a})})))},C=function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(d.a.Check,Object.assign({type:"radio",label:e.label},e.input,{value:e.radioValue})),u(e.meta))}},647:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return l}));var n=function(e){var t={};return e.examCenterCode||(t.examCenterCode="Please enter the exam center code"),e.safeRoomNo||(t.safeRoomNo="Please enter the safe room number"),t},l=function(e){var t={};return e.schoolCode||(t.schoolCode="Please enter the school code"),e.schoolName||(t.schoolName="Please enter the school name"),e.schoolAddress||(t.schoolAddress="Please enter the school address"),e.postcode||(t.postcode="Please enter the postcode"),e.city||(t.city="Please enter the city"),e.stateCode||(t.stateCode="Please enter the state code"),e.areaCode||(t.areaCode="Please enter the area code"),e.taxNumber||(t.taxNumber="Please enter the tax number"),e.typeOfSchool||(t.typeOfSchool="Please select the type of school"),e.codeDun||(t.codeDun="Please enter the code DUN"),e.codeParlimen||(t.codeParlimen="Please enter the code Parlimen"),e.schoolPhoneNumber||(t.schoolPhoneNumber="Please enter the school's phone number"),e.schoolEmailAddress?/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e.schoolEmailAddress)||(t.schoolEmailAddress="Please enter a valid school's email address"):t.schoolEmailAddress="Please enter the school's email address",t}},648:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return l}));var n=function(e,t){return!e.find((function(e){return e.schoolCode===t}))},l=function(e,t){return!e.find((function(e){return e.examCenterCode===t}))}},850:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=[{id:"01",title:"Public School",value:"Public School"},{id:"02",title:"International School",value:"International School"},{id:"03",title:"Private School",value:"Private School"},{id:"04",title:"Vernacular School",value:"Vernacular School"}]},851:function(e,t,a){"use strict";var n=a(0),l=a.n(n),o=a(627),c=a(953);t.a=function(e){return l.a.createElement(n.Fragment,null,l.a.createElement(o.a,{className:"text-capitalize btn btn-dark",onClick:function(){return e.toggleModal(!0)}},"All registered schools"),l.a.createElement(c.a,{show:e.showModal,onHide:function(){return e.toggleModal(!1)},size:"lg",scrollable:!0},l.a.createElement(c.a.Header,{closeButton:!0},l.a.createElement(c.a.Title,null)),l.a.createElement(c.a.Body,null,l.a.createElement("div",{className:"row mb-4"},l.a.createElement("div",{className:"col-md-12 mb-4"},l.a.createElement("div",{className:"text-left p-1"},l.a.createElement("div",{className:"p-3"},l.a.createElement("h4",{className:"mb-2"},"Registered Schools"),l.a.createElement("ul",{className:"list-group"},e.items.map((function(e){return l.a.createElement("li",{className:"list-group-item",key:e.id},"".concat(e.schoolCode," - ").concat(e.schoolName," - ").concat(e.examCenters.length," exam center(s)"))})))))))),l.a.createElement(c.a.Footer,null,l.a.createElement(o.a,{variant:"secondary",onClick:function(){e.toggleModal(!1)}},"Close"))))}}}]);
//# sourceMappingURL=18.7a01c3e9.chunk.js.map