{"version":3,"sources":["app/views/letterTemplates/letter_templates_list/LetterTemplatesList.js","app/views/shared/components/ErrorModal.js","app/views/shared/components/Loader.js"],"names":["SearchBar","Search","connect","state","letterTemplates","letterTemplatesList","httpError","error","loading","getAllLetterTemplates","updateLetterTemplates","resetError","setError","props","useEffect","sortableColumn","dataField","text","sort","formatter","cell","row","rowIndex","className","placement","overlay","id","to","view","size","edit","onClick","swal","fire","title","icon","type","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","cancelButtonText","then","result","value","onBeforeOpen","showLoading","onOpen","a","axios","method","url","process","response","hideLoading","allowOutsideClick","paginationOptions","paginationSize","pageStartIndex","firstPageText","prePageText","nextPageText","lastPageText","nextPageTitle","prePageTitle","firstPageTitle","lastPageTitle","showTotal","totalSize","length","onConfirm","routeSegments","name","path","striped","keyField","data","columns","search","searchProps","baseProps","bootstrap4","pagination","paginationFactory","noDataIndication","wrapperClasses","ErrorModal","show","message","styles","position","left","right","top","margin","height","width","zIndex","loaderOverlay","backgroundColor","Loader","style"],"mappings":"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","file":"static/js/38.010f8159.chunk.js","sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Breadcrumb, SimpleCard } from \"@gull\";\r\nimport { Link } from \"react-router-dom\";\r\nimport BootstrapTable from \"react-bootstrap-table-next\";\r\nimport paginationFactory from \"react-bootstrap-table2-paginator\";\r\nimport ToolkitProvider, { Search } from \"react-bootstrap-table2-toolkit\";\r\nimport { OverlayTrigger, Tooltip } from \"react-bootstrap\";\r\nimport { MdModeEdit, MdRemoveRedEye, MdDelete } from \"react-icons/md\";\r\nimport swal from \"sweetalert2\";\r\nimport axios from \"axios\";\r\n\r\nimport ErrorModal from \"app/views/shared/components/ErrorModal\";\r\nimport Loader from \"app/views/shared/components/Loader\";\r\nimport {\r\n  getAllLetterTemplates,\r\n  updateLetterTemplates,\r\n} from \"app/redux/actions/LetterTemplatesListActions\";\r\nimport { resetError, setError } from \"app/redux/actions/ErrorModalActions\";\r\n\r\nlet { SearchBar } = Search;\r\n\r\nconst LetterTemplatesList = (props) => {\r\n  useEffect(() => {\r\n    props.getAllLetterTemplates();\r\n  }, []);\r\n\r\n  const renderActionButtons = (cell, row, rowIndex) => {\r\n    return (\r\n      <div className=\"d-flex flex-wrap align-items-center\">\r\n        <OverlayTrigger\r\n          placement=\"top\"\r\n          overlay={<Tooltip id=\"tooltip-top\">View</Tooltip>}\r\n        >\r\n          <Link className=\"p-2 btn-hover rounded-circle\" to={cell.view}>\r\n            <MdRemoveRedEye\r\n              className=\"cursor-pointer\"\r\n              size={24}\r\n            ></MdRemoveRedEye>\r\n          </Link>\r\n        </OverlayTrigger>\r\n        <OverlayTrigger\r\n          placement=\"top\"\r\n          overlay={<Tooltip id=\"tooltip-top\">Edit</Tooltip>}\r\n        >\r\n          <Link className=\"p-2 btn-hover rounded-circle\" to={cell.edit}>\r\n            <MdModeEdit className=\"cursor-pointer\" size={24}></MdModeEdit>\r\n          </Link>\r\n        </OverlayTrigger>\r\n        <OverlayTrigger\r\n          placement=\"top\"\r\n          overlay={<Tooltip id=\"tooltip-top\">Delete</Tooltip>}\r\n        >\r\n          <div\r\n            className=\"p-2 btn-hover rounded-circle\"\r\n            onClick={() => {\r\n              swal\r\n                .fire({\r\n                  title: \"Are you sure?\",\r\n                  text: `Confirm to delete ${row.title}`,\r\n                  icon: \"warning\",\r\n                  type: \"question\",\r\n                  showCancelButton: true,\r\n                  confirmButtonColor: \"#3085d6\",\r\n                  cancelButtonColor: \"#d33\",\r\n                  confirmButtonText: \"Yes, delete it!\",\r\n                  cancelButtonText: \"No\",\r\n                })\r\n                .then((result) => {\r\n                  if (result.value) {\r\n                    swal.fire({\r\n                      title: \"Deleting the template...\",\r\n                      onBeforeOpen: () => {\r\n                        swal.showLoading();\r\n                      },\r\n                      onOpen: async () => {\r\n                        //submit form process here remember to async and await with try...catch block\r\n                        try {\r\n                          await axios({\r\n                            method: \"DELETE\",\r\n                            url: `${process.env.REACT_APP_BACKEND_URL}/letters/${row.id}`,\r\n                          }).then((response) => {\r\n                            swal.hideLoading();\r\n                            swal\r\n                              .fire({\r\n                                title:\r\n                                  \"Successfully Delete the Letter Template\",\r\n                                icon: \"success\",\r\n                                allowOutsideClick: false,\r\n                              })\r\n                              .then((result) => {\r\n                                props.updateLetterTemplates(row.id);\r\n                              });\r\n                          });\r\n                        } catch (err) {\r\n                          swal.hideLoading();\r\n                          props.setError(err);\r\n                        }\r\n                      },\r\n                      allowOutsideClick: () => false,\r\n                    });\r\n                  } else {\r\n                    swal.fire(\"Cancelled!\", \"Permission denied.\", \"error\");\r\n                  }\r\n                });\r\n            }}\r\n          >\r\n            <MdDelete\r\n              className=\"cursor-pointer text-primary\"\r\n              size={24}\r\n            ></MdDelete>\r\n          </div>\r\n        </OverlayTrigger>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const sortableColumn = [\r\n    {\r\n      dataField: \"index\",\r\n      text: \"No\",\r\n      sort: true,\r\n    },\r\n    {\r\n      dataField: \"title\",\r\n      text: \"Letter Template Title\",\r\n      sort: true,\r\n    },\r\n    {\r\n      dataField: \"actions\",\r\n      text: \"Action\",\r\n      formatter: renderActionButtons,\r\n    },\r\n  ];\r\n\r\n  const paginationOptions = {\r\n    paginationSize: 5,\r\n    pageStartIndex: 1,\r\n    firstPageText: \"First\",\r\n    prePageText: \"Back\",\r\n    nextPageText: \"Next\",\r\n    lastPageText: \"Last\",\r\n    nextPageTitle: \"First page\",\r\n    prePageTitle: \"Pre page\",\r\n    firstPageTitle: \"Next page\",\r\n    lastPageTitle: \"Last page\",\r\n    showTotal: true,\r\n    totalSize: props.letterTemplates.length,\r\n  };\r\n  return (\r\n    <div>\r\n      {props.loading && <Loader></Loader>}\r\n      <ErrorModal error={props.httpError} onConfirm={props.resetError} />\r\n      <Breadcrumb\r\n        routeSegments={[\r\n          { name: \"Letter Templates\", path: \"/letter\" },\r\n          { name: \"Letter Templates List\" },\r\n        ]}\r\n      ></Breadcrumb>\r\n      <SimpleCard title=\"Letter Templates List\">\r\n        <ToolkitProvider\r\n          striped\r\n          keyField=\"id\"\r\n          data={props.letterTemplates}\r\n          columns={sortableColumn}\r\n          search\r\n        >\r\n          {(props) => (\r\n            <>\r\n              <div className=\"d-flex justify-content-start align-items-center\">\r\n                <SearchBar {...props.searchProps} className=\"mb-2\" />\r\n              </div>\r\n              <BootstrapTable\r\n                {...props.baseProps}\r\n                bootstrap4\r\n                pagination={paginationFactory(paginationOptions)}\r\n                noDataIndication={\"Table is empty\"}\r\n                wrapperClasses=\"table-responsive\"\r\n              />\r\n            </>\r\n          )}\r\n        </ToolkitProvider>\r\n      </SimpleCard>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    letterTemplates: state.letterTemplatesList.letterTemplates,\r\n    httpError: state.error.error,\r\n    loading: state.loading.loading,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, {\r\n  getAllLetterTemplates,\r\n  updateLetterTemplates,\r\n  resetError,\r\n  setError,\r\n})(LetterTemplatesList);\r\n","import React from \"react\";\r\nimport SweetAlert from \"sweetalert2-react\";\r\n\r\nconst ErrorModal = (props) => {\r\n  return (\r\n    <SweetAlert\r\n      show={!!props.error}\r\n      title=\"An Error Occured\"\r\n      type=\"error\"\r\n      text={\r\n        props.error\r\n          ? props.error.response\r\n            ? props.error.response.data.message\r\n            : props.error.message\r\n          : \"\"\r\n      }\r\n      onConfirm={() => props.onConfirm()}\r\n    />\r\n  );\r\n};\r\n\r\nexport default ErrorModal;\r\n","import React from \"react\";\r\n\r\nconst styles = {\r\n  position: \"fixed\",\r\n  left: 0,\r\n  right: 0,\r\n  top: \"calc(50% - 20px)\",\r\n  margin: \"auto\",\r\n  height: \"40px\",\r\n  width: \"40px\",\r\n  zIndex: 324324324,\r\n};\r\n\r\nconst loaderOverlay = {\r\n  position: \"fixed\",\r\n  left: 0,\r\n  top: 0,\r\n  height: \"100%\",\r\n  width: \"100%\",\r\n  zIndex: 324324323,\r\n  backgroundColor: \"white\",\r\n};\r\n\r\nconst Loader = () => {\r\n  return (\r\n    <div style={loaderOverlay}>\r\n      <div style={styles}>\r\n        <div className=\"spinner spinner-bubble spinner-bubble-primary\"></div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Loader;\r\n"],"sourceRoot":""}