(this["webpackJsonpgull-react"]=this["webpackJsonpgull-react"]||[]).push([[23],{1543:function(e,t,a){"use strict";a.r(t);var n=a(4),l=a.n(n),r=a(1),c=a(11),s=a(0),i=a.n(s),o=a(36),m=a(12),u=a(114),d=a(1562),f=a(1559),p=a(41),g=a.n(p),h=a(1560),v=a(645),E=a(575),x=a.n(E),b=a(2),N=a.n(b),C=a(553),y=a(555),k=a(562),T=a(840),O=a(145),w=a(7);t.default=Object(o.b)((function(e){return Object(r.a)(Object(r.a)({},e.newAssignmentTask),{},{httpError:e.error.error,loading:e.loading.loading})}),{getAllExamCenters:O.b,setError:w.d,resetError:w.c})(Object(f.a)({form:"NewAssignmentTask",validate:v.b})((function(e){var t=Object(m.g)();Object(s.useEffect)((function(){e.getAllExamCenters()}),[]);return i.a.createElement("div",null,e.loading&&i.a.createElement(y.a,null),i.a.createElement(C.a,{error:e.httpError,onConfirm:e.resetError}),i.a.createElement(u.a,{routeSegments:[{name:"Assignment Tasks",path:"/assignment"},{name:"New Assignment Task"}]}),i.a.createElement("div",{className:"2-columns-form-layout"},i.a.createElement("div",{className:""},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-12"},i.a.createElement("div",{className:"card"},i.a.createElement("div",{className:"card-header bg-transparent"},i.a.createElement("h3",{className:"card-title"}," New Assignment Task")),i.a.createElement("form",{onSubmit:e.handleSubmit((function(a){x.a.fire({title:"Creating Assignment Task...",onBeforeOpen:function(){x.a.showLoading()},onOpen:function(){var n=Object(c.a)(l.a.mark((function n(){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a=Object(r.a)(Object(r.a)({},a),{},{collectionDate:a.collectionDate.toString()}),n.next=4,N()({method:"POST",url:"".concat("https://peia-iam.herokuapp.com/api","/assignments"),data:a}).then((function(e){x.a.hideLoading(),x.a.fire({title:"Successfully Create New Assignment Task",icon:"success",allowOutsideClick:!1}).then((function(e){t.push("/assignment/list")}))}));case 4:n.next=10;break;case 6:n.prev=6,n.t0=n.catch(0),x.a.hideLoading(),e.setError(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(){return n.apply(this,arguments)}}(),allowOutsideClick:!1})}))},i.a.createElement("div",{className:"card-body"},i.a.createElement("div",{className:"row"},i.a.createElement(d.a,{className:"col-md-6",name:"title",type:"text",placeholder:"Assignment Task Title",helpText:"Please enter the assignment task's title",component:k.d}),i.a.createElement(d.a,{className:"col-md-6",name:"examType",items:T.a,helpText:"Please select the exam type",defaultOption:"Please select an exam type...",component:k.f})),i.a.createElement("div",{className:"custom-separator"}),i.a.createElement("div",{className:"row"},i.a.createElement(d.a,{className:"col-md-6",name:"collectionDate",placeholder:"Please select collection deadline",isValidDate:function(e){return e.isAfter(g()().subtract(1,"day"))},helpText:"Please select data collection deadline",component:k.c})),i.a.createElement("div",{className:"custom-separator"}),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"form-group col-md-6"},i.a.createElement(h.a.Check,{type:"switch",name:"selectAll",label:"Select All Exam Centers",onChange:function(t){if(t.target.checked){var a=e.examCenters.map((function(e){return e.id}));e.change("examCenters",a)}else e.change("examCenters",[])}}))),i.a.createElement("div",{className:"row"},i.a.createElement(d.a,{name:"examCenters",items:e.examCenters,component:k.g}))),i.a.createElement("div",{className:"card-footer"},i.a.createElement("div",{className:"mc-footer"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg-12"},i.a.createElement("button",{type:"submit",className:"btn btn-primary m-1"},"Create Task"))))))))))))})))},553:function(e,t,a){"use strict";var n=a(0),l=a.n(n),r=a(569),c=a.n(r);t.a=function(e){return l.a.createElement(c.a,{show:!!e.error,title:"An Error Occured",type:"error",text:e.error?e.error.response?e.error.response.data.message:e.error.message:"",onConfirm:function(){return e.onConfirm()}})}},555:function(e,t,a){"use strict";var n=a(0),l=a.n(n),r={position:"fixed",left:0,right:0,top:"calc(50% - 20px)",margin:"auto",height:"40px",width:"40px",zIndex:324324324},c={position:"fixed",left:0,top:0,height:"100%",width:"100%",zIndex:324324323,backgroundColor:"white"};t.a=function(){return l.a.createElement("div",{style:c},l.a.createElement("div",{style:r},l.a.createElement("div",{className:"spinner spinner-bubble spinner-bubble-primary"})))}},558:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=[{id:"01",title:"Assignment Task Title",value:"title"},{id:"02",title:"Exam Type",value:"examType"},{id:"04",title:"Assigned Exam Center Name",value:"assignmentResults[assignmentResultIndex].results[resultIndex].examCenter.school.schoolName"},{id:"05",title:"Assigned School Code",value:"assignmentResults[assignmentResultIndex].results[resultIndex].examCenter.school.schoolCode"},{id:"06",title:"Assigned Exam Center Code",value:"assignmentResults[assignmentResultIndex].results[resultIndex].examCenter.examCenterCode"},{id:"07",title:"Role",value:"assignmentResults[assignmentResultIndex].role"},{id:"08",title:"Invigilator Name",value:"assignmentResults[assignmentResultIndex].results[resultIndex].invigilators[invigilatorIndex].teacherName"},{id:"09",title:"Invigilator IC",value:"assignmentResults[assignmentResultIndex].results[resultIndex].invigilators[invigilatorIndex].icNumber"}]},562:function(e,t,a){"use strict";a.d(t,"d",(function(){return f})),a.d(t,"f",(function(){return p})),a.d(t,"c",(function(){return g})),a.d(t,"g",(function(){return h})),a.d(t,"a",(function(){return E})),a.d(t,"e",(function(){return x})),a.d(t,"h",(function(){return N})),a.d(t,"b",(function(){return C}));var n=a(6),l=a(0),r=a.n(l),c=a(584),s=a.n(c),i=a(114),o=a(1562),m=a(558),u=a(1560),d=function(e){if(e.touched&&e.error)return r.a.createElement("div",{className:"text-danger mt-1 ml-2"},e.error)},f=function(e){return r.a.createElement("div",{className:"form-group ".concat(e.className||"")},r.a.createElement("input",Object.assign({readOnly:e.readOnly,type:e.type},e.input,{placeholder:e.placeholder,className:"form-control"})),r.a.createElement("small",{className:"ul-form__text form-text "},e.helpText),d(e.meta))},p=function(e){return r.a.createElement("div",{className:"form-group ".concat(e.className||"")},r.a.createElement("select",Object.assign({className:"form-control"},e.input,{onChange:e.input.onChange}),r.a.createElement("option",{value:""},e.defaultOption),e.items.map((function(e){return r.a.createElement("option",{key:e.id,value:e.value},e.title)}))),r.a.createElement("small",{className:"ul-form__text form-text "},e.helpText),d(e.meta))},g=function(e){return r.a.createElement("div",{className:"form-group ".concat(e.className||"")},r.a.createElement(s.a,{name:e.name,closeOnSelect:!0,onChange:e.input.onChange,isValidDate:e.isValidDate,timeFormat:"HH:mm",dateFormat:"DD/MM/YYYY",placeholder:e.placeholder,value:e.input.value}),r.a.createElement("small",{className:"ul-form__text form-text "},e.helpText),d(e.meta))},h=function(e){return r.a.createElement("div",{className:"form-group ".concat(e.className||"")},r.a.createElement("label",{className:"ul-form__label"},"Exam Centers: "),r.a.createElement("div",{className:"row"},e.items.map((function(t,a){return r.a.createElement("div",{className:"form-group col-md-6",key:a},r.a.createElement("label",{className:"checkbox checkbox-primary"},r.a.createElement("input",{type:"checkbox",name:"".concat(e.input.name,"[").concat(a,"]"),value:t.id,checked:-1!==e.input.value.indexOf(t.id),onChange:function(a){var l=Object(n.a)(e.input.value);return a.target.checked?l.push(t.id):l.splice(l.indexOf(t.id),1),e.input.onChange(l)}}),r.a.createElement("span",null,"".concat(t.school.schoolCode," - ").concat(t.examCenterCode," - ").concat(t.school.schoolName)),r.a.createElement("span",{className:"checkmark"})))}))),d(e.meta))},v=function(e){return r.a.createElement("div",{className:"form-group ".concat(e.className||"")},r.a.createElement("select",Object.assign({},e.input,{className:"form-control",onChange:e.input.onChange}),e.options.map((function(t){return t.user.school.id!==e.assigningSchoolId&&r.a.createElement("option",{key:t.id,value:t.id},"".concat(t.teacherName," - ").concat(t.user.school.schoolCode))}))),d(e.meta))},E=function(e){return r.a.createElement("div",{className:"col-md-4"},r.a.createElement("label",{className:"ul-form__label"},e.label),r.a.createElement("div",{className:"row"},e.fields.map((function(t,a){return r.a.createElement(o.a,{key:t,className:"col-lg-12",name:t,options:e.options,assigningSchoolId:e.schoolId,component:v})}))))},x=function(e){return r.a.createElement("div",{className:"col-md-12"},r.a.createElement(i.e,{title:e.title,subtitle:e.subtitle},r.a.createElement(i.d,Object.assign({},e.input,{content:e.input.value,handleContentChange:e.input.onChange,placeholder:e.placeholder}))),d(e.meta))},b=function(e){return r.a.createElement("div",{className:"form-group ".concat(e.className||"")},r.a.createElement("div",{className:"row"},r.a.createElement("label",{className:"ul-form__label ul-form--margin col-lg-1 col-form-label "},e.label),r.a.createElement("div",{className:"col-lg-8"},r.a.createElement("select",Object.assign({className:"form-control"},e.input,{onChange:e.input.onChange}),r.a.createElement("option",{value:""},e.defaultOption),e.items.map((function(e){return r.a.createElement("option",{key:e.id,value:e.value},e.title)})))),r.a.createElement("div",{className:"col-lg-3"},r.a.createElement("button",{type:"button",className:"btn btn-danger m-1",onClick:function(){var t="&lt;"+(e.index+1)+"&gt;",a=e.letterContent.replace(t,"");if(e.index<e.fieldLength)for(var n=e.index+1;n<e.fieldLength;n++){var l="&lt;"+(n+1)+"&gt;",r="&lt;"+n+"&gt;";a=a.replace(l,r)}e.changeFunction("content",a),e.onRemoveTag(e.index)}},"Remove Tag"))),d(e.meta))},N=function(e){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("button",{type:"button",className:"btn btn-outline-secondary m-1",onClick:function(){var t;e.fields.push({}),t=e.letterContent?e.letterContent+"&lt;"+(e.fields.length+1)+"&gt;":"&lt;"+(e.fields.length+1)+"&gt;",e.changeFunction("content",t)}},"Add New Tag")),r.a.createElement("div",{className:"custom-separator"}),e.fields.map((function(t,a){return r.a.createElement(o.a,{key:a,className:"col-md-12",label:"<".concat(a+1,">"),name:"".concat(t,".value"),component:b,defaultOption:"Please select a field",onRemoveTag:e.fields.remove,changeFunction:e.changeFunction,letterContent:e.letterContent,index:a,fieldLength:e.fields.length,items:m.a})})))},C=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a.Check,Object.assign({type:"radio",label:e.label},e.input,{value:e.radioValue})),d(e.meta))}},645:function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return r})),a.d(t,"c",(function(){return c}));var n=a(53),l=function(e){var t={};return e.title||(t.title="Please enter the title"),e.examType&&""!==e.examType||(t.examType="Please select the exam type"),e.collectionDate||(t.collectionDate="Please select the deadline of data collection"),(!e.examCenters||e.examCenters.length<=1)&&(t.examCenters="Must select at least two exam center"),t},r=function(e){var t={};for(var a in e)t[a]=new Array(e[a].length);var l=!1;for(var r in e){var c,s=e[r],i=Object(n.a)(s);try{for(i.s();!(c=i.n()).done;){var o=c.value;if(s.indexOf(o)!==s.lastIndexOf(o)){t[r][s.indexOf(o)]="The invigilator cannot be the same",t[r][s.lastIndexOf(o)]="The invigilator cannot be the same",l=!0;break}for(var m in e)if(m!==r){var u,d=e[m],f=Object(n.a)(d);try{for(f.s();!(u=f.n()).done;){if(o===u.value){t[r][s.indexOf(o)]="The invigilator cannot be the same",t[m][d.indexOf(o)]="The invigilator cannot be the same",l=!0;break}}}catch(p){f.e(p)}finally{f.f()}}}}catch(p){i.e(p)}finally{i.f()}if(l)break}return t},c=function(e){var t={};return e.letterTemplate||(t.letterTemplate="Please select the letter template"),t}},840:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=[{id:"01",title:"Pentaksiran Tingkatan 3 (PT3)",value:"PT3"},{id:"02",title:"Sijil Pelajaran Malaysia (SPM)",value:"SPM"},{id:"03",title:"Sijil Tinggi Persekolahan Malaysia (STPM)",value:"STPM"}]}}]);
//# sourceMappingURL=23.fabc9d49.chunk.js.map