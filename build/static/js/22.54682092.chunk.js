(this["webpackJsonpgull-react"]=this["webpackJsonpgull-react"]||[]).push([[22],{1547:function(e,t,a){"use strict";a.r(t);var n=a(4),l=a.n(n),r=a(11),s=a(1),i=a(0),c=a.n(i),o=a(36),m=a(114),u=a(12),d=a(1562),f=a(1559),g=a(41),p=a.n(g),h=a(1560),v=a(575),E=a.n(v),x=a(2),b=a.n(x),N=a(553),C=a(555),T=a(562),k=a(149),y=a(7),O=a(840),w=a(645);t.default=Object(o.b)((function(e){return{initialValues:{title:e.editAssignmentTask.assignmentTask.title,examType:e.editAssignmentTask.assignmentTask.examType,collectionDate:p()(e.editAssignmentTask.assignmentTask.collectionDate,p.a.ISO_8601).format("DD/MM/YYYY HH:mm"),examCenters:e.editAssignmentTask.assignmentTask.examCenters},examCenters:e.editAssignmentTask.examCenters,httpError:e.error.error,loading:e.loading.loading}}),{initializeForm:k.b,setError:y.d,resetError:y.c})(Object(f.a)({form:"EditAssignmentTask",validate:w.b,enableReinitialize:!0})((function(e){var t=Object(u.g)(),a=Object(u.h)().taskId;Object(i.useEffect)((function(){e.initializeForm(a)}),[]);return c.a.createElement("div",null,e.loading&&c.a.createElement(C.a,null),c.a.createElement(N.a,{error:e.httpError,onConfirm:e.resetError}),c.a.createElement(m.a,{routeSegments:[{name:"Assignment Tasks",path:"/assignment"},{name:"Assignment Tasks List",path:"/assignment/list"},{name:"Edit Assignment Task"}]}),c.a.createElement("div",{className:"2-columns-form-layout"},c.a.createElement("div",{className:""},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-lg-12"},c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"card-header bg-transparent"},c.a.createElement("h3",{className:"card-title"}," Edit Assignment Task")),c.a.createElement("form",{onSubmit:e.handleSubmit((function(n){E.a.fire({title:"Are you sure?",text:"Any changes adding or removing exam centers will remove the previous assignment result",icon:"warning",type:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Save Changes!",cancelButtonText:"No"}).then((function(i){i.value?(n=Object(s.a)(Object(s.a)({},n),{},{collectionDate:p()(n.collectionDate,"DD/MM/YYYY HH:mm").toString()}),E.a.fire({title:"Saving Changes...",onBeforeOpen:function(){E.a.showLoading()},onOpen:function(){var s=Object(r.a)(l.a.mark((function r(){return l.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,b()({method:"PATCH",url:"".concat("https://peia-iam.herokuapp.com/api","/assignments/").concat(a),data:n}).then((function(e){E.a.hideLoading(),E.a.fire({title:"Successfully Edit Assignment Task",icon:"success",html:"Please re-assign the invigilators if there is any adding/removing of exam centers",allowOutsideClick:!1}).then((function(e){t.push("/assignment/list")}))}));case 3:l.next=9;break;case 5:l.prev=5,l.t0=l.catch(0),E.a.hideLoading(),e.setError(l.t0);case 9:case"end":return l.stop()}}),r,null,[[0,5]])})));return function(){return s.apply(this,arguments)}}(),allowOutsideClick:!1})):E.a.fire("Cancelled!","Permission denied.","error")}))}))},c.a.createElement("div",{className:"card-body"},c.a.createElement("div",{className:"row"},c.a.createElement(d.a,{className:"col-md-6",name:"title",type:"text",placeholder:"Assignment Task Title",helpText:"Please enter the assignment task's title",component:T.d}),c.a.createElement(d.a,{className:"col-md-6",name:"examType",items:O.a,helpText:"Please select the exam type",defaultOption:"Please select an exam type...",component:T.f})),c.a.createElement("div",{className:"custom-separator"}),c.a.createElement("div",{className:"row"},c.a.createElement(d.a,{className:"col-md-6",name:"collectionDate",placeholder:"Please select data collection deadline",helpText:"Please select data collection deadline",isValidDate:function(e){return e.isAfter(p()().subtract(1,"day"))},component:T.c})),c.a.createElement("div",{className:"custom-separator"}),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"form-group col-md-6"},c.a.createElement(h.a.Check,{type:"switch",name:"selectAll",label:"Select All Exam Centers",onChange:function(t){if(t.target.checked){var a=e.examCenters.map((function(e){return e.id}));e.change("examCenters",a)}else e.change("examCenters",[])}}))),c.a.createElement("div",{className:"row"},c.a.createElement(d.a,{name:"examCenters",items:e.examCenters,component:T.g}))),c.a.createElement("div",{className:"card-footer"},c.a.createElement("div",{className:"mc-footer"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-lg-12"},c.a.createElement("button",{type:"submit",className:"btn  btn-primary m-1"},"Save Changes"))))))))))))})))},553:function(e,t,a){"use strict";var n=a(0),l=a.n(n),r=a(569),s=a.n(r);t.a=function(e){return l.a.createElement(s.a,{show:!!e.error,title:"An Error Occured",type:"error",text:e.error?e.error.response?e.error.response.data.message:e.error.message:"",onConfirm:function(){return e.onConfirm()}})}},555:function(e,t,a){"use strict";var n=a(0),l=a.n(n),r={position:"fixed",left:0,right:0,top:"calc(50% - 20px)",margin:"auto",height:"40px",width:"40px",zIndex:324324324},s={position:"fixed",left:0,top:0,height:"100%",width:"100%",zIndex:324324323,backgroundColor:"white"};t.a=function(){return l.a.createElement("div",{style:s},l.a.createElement("div",{style:r},l.a.createElement("div",{className:"spinner spinner-bubble spinner-bubble-primary"})))}},558:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=[{id:"01",title:"Assignment Task Title",value:"title"},{id:"02",title:"Exam Type",value:"examType"},{id:"04",title:"Assigned Exam Center Name",value:"assignmentResults[assignmentResultIndex].results[resultIndex].examCenter.school.schoolName"},{id:"05",title:"Assigned School Code",value:"assignmentResults[assignmentResultIndex].results[resultIndex].examCenter.school.schoolCode"},{id:"06",title:"Assigned Exam Center Code",value:"assignmentResults[assignmentResultIndex].results[resultIndex].examCenter.examCenterCode"},{id:"07",title:"Role",value:"assignmentResults[assignmentResultIndex].role"},{id:"08",title:"Invigilator Name",value:"assignmentResults[assignmentResultIndex].results[resultIndex].invigilators[invigilatorIndex].teacherName"},{id:"09",title:"Invigilator IC",value:"assignmentResults[assignmentResultIndex].results[resultIndex].invigilators[invigilatorIndex].icNumber"}]},562:function(e,t,a){"use strict";a.d(t,"d",(function(){return f})),a.d(t,"f",(function(){return g})),a.d(t,"c",(function(){return p})),a.d(t,"g",(function(){return h})),a.d(t,"a",(function(){return E})),a.d(t,"e",(function(){return x})),a.d(t,"h",(function(){return N})),a.d(t,"b",(function(){return C}));var n=a(6),l=a(0),r=a.n(l),s=a(584),i=a.n(s),c=a(114),o=a(1562),m=a(558),u=a(1560),d=function(e){if(e.touched&&e.error)return r.a.createElement("div",{className:"text-danger mt-1 ml-2"},e.error)},f=function(e){return r.a.createElement("div",{className:"form-group ".concat(e.className||"")},r.a.createElement("input",Object.assign({readOnly:e.readOnly,type:e.type},e.input,{placeholder:e.placeholder,className:"form-control"})),r.a.createElement("small",{className:"ul-form__text form-text "},e.helpText),d(e.meta))},g=function(e){return r.a.createElement("div",{className:"form-group ".concat(e.className||"")},r.a.createElement("select",Object.assign({className:"form-control"},e.input,{onChange:e.input.onChange}),r.a.createElement("option",{value:""},e.defaultOption),e.items.map((function(e){return r.a.createElement("option",{key:e.id,value:e.value},e.title)}))),r.a.createElement("small",{className:"ul-form__text form-text "},e.helpText),d(e.meta))},p=function(e){return r.a.createElement("div",{className:"form-group ".concat(e.className||"")},r.a.createElement(i.a,{name:e.name,closeOnSelect:!0,onChange:e.input.onChange,isValidDate:e.isValidDate,timeFormat:"HH:mm",dateFormat:"DD/MM/YYYY",placeholder:e.placeholder,value:e.input.value}),r.a.createElement("small",{className:"ul-form__text form-text "},e.helpText),d(e.meta))},h=function(e){return r.a.createElement("div",{className:"form-group ".concat(e.className||"")},r.a.createElement("label",{className:"ul-form__label"},"Exam Centers: "),r.a.createElement("div",{className:"row"},e.items.map((function(t,a){return r.a.createElement("div",{className:"form-group col-md-6",key:a},r.a.createElement("label",{className:"checkbox checkbox-primary"},r.a.createElement("input",{type:"checkbox",name:"".concat(e.input.name,"[").concat(a,"]"),value:t.id,checked:-1!==e.input.value.indexOf(t.id),onChange:function(a){var l=Object(n.a)(e.input.value);return a.target.checked?l.push(t.id):l.splice(l.indexOf(t.id),1),e.input.onChange(l)}}),r.a.createElement("span",null,"".concat(t.school.schoolCode," - ").concat(t.examCenterCode," - ").concat(t.school.schoolName)),r.a.createElement("span",{className:"checkmark"})))}))),d(e.meta))},v=function(e){return r.a.createElement("div",{className:"form-group ".concat(e.className||"")},r.a.createElement("select",Object.assign({},e.input,{className:"form-control",onChange:e.input.onChange}),e.options.map((function(t){return t.user.school.id!==e.assigningSchoolId&&r.a.createElement("option",{key:t.id,value:t.id},"".concat(t.teacherName," - ").concat(t.user.school.schoolCode))}))),d(e.meta))},E=function(e){return r.a.createElement("div",{className:"col-md-4"},r.a.createElement("label",{className:"ul-form__label"},e.label),r.a.createElement("div",{className:"row"},e.fields.map((function(t,a){return r.a.createElement(o.a,{key:t,className:"col-lg-12",name:t,options:e.options,assigningSchoolId:e.schoolId,component:v})}))))},x=function(e){return r.a.createElement("div",{className:"col-md-12"},r.a.createElement(c.e,{title:e.title,subtitle:e.subtitle},r.a.createElement(c.d,Object.assign({},e.input,{content:e.input.value,handleContentChange:e.input.onChange,placeholder:e.placeholder}))),d(e.meta))},b=function(e){return r.a.createElement("div",{className:"form-group ".concat(e.className||"")},r.a.createElement("div",{className:"row"},r.a.createElement("label",{className:"ul-form__label ul-form--margin col-lg-1 col-form-label "},e.label),r.a.createElement("div",{className:"col-lg-8"},r.a.createElement("select",Object.assign({className:"form-control"},e.input,{onChange:e.input.onChange}),r.a.createElement("option",{value:""},e.defaultOption),e.items.map((function(e){return r.a.createElement("option",{key:e.id,value:e.value},e.title)})))),r.a.createElement("div",{className:"col-lg-3"},r.a.createElement("button",{type:"button",className:"btn btn-danger m-1",onClick:function(){var t="&lt;"+(e.index+1)+"&gt;",a=e.letterContent.replace(t,"");if(e.index<e.fieldLength)for(var n=e.index+1;n<e.fieldLength;n++){var l="&lt;"+(n+1)+"&gt;",r="&lt;"+n+"&gt;";a=a.replace(l,r)}e.changeFunction("content",a),e.onRemoveTag(e.index)}},"Remove Tag"))),d(e.meta))},N=function(e){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("button",{type:"button",className:"btn btn-outline-secondary m-1",onClick:function(){var t;e.fields.push({}),t=e.letterContent?e.letterContent+"&lt;"+(e.fields.length+1)+"&gt;":"&lt;"+(e.fields.length+1)+"&gt;",e.changeFunction("content",t)}},"Add New Tag")),r.a.createElement("div",{className:"custom-separator"}),e.fields.map((function(t,a){return r.a.createElement(o.a,{key:a,className:"col-md-12",label:"<".concat(a+1,">"),name:"".concat(t,".value"),component:b,defaultOption:"Please select a field",onRemoveTag:e.fields.remove,changeFunction:e.changeFunction,letterContent:e.letterContent,index:a,fieldLength:e.fields.length,items:m.a})})))},C=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a.Check,Object.assign({type:"radio",label:e.label},e.input,{value:e.radioValue})),d(e.meta))}},645:function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return r})),a.d(t,"c",(function(){return s}));var n=a(53),l=function(e){var t={};return e.title||(t.title="Please enter the title"),e.examType&&""!==e.examType||(t.examType="Please select the exam type"),e.collectionDate||(t.collectionDate="Please select the deadline of data collection"),(!e.examCenters||e.examCenters.length<=1)&&(t.examCenters="Must select at least two exam center"),t},r=function(e){var t={};for(var a in e)t[a]=new Array(e[a].length);var l=!1;for(var r in e){var s,i=e[r],c=Object(n.a)(i);try{for(c.s();!(s=c.n()).done;){var o=s.value;if(i.indexOf(o)!==i.lastIndexOf(o)){t[r][i.indexOf(o)]="The invigilator cannot be the same",t[r][i.lastIndexOf(o)]="The invigilator cannot be the same",l=!0;break}for(var m in e)if(m!==r){var u,d=e[m],f=Object(n.a)(d);try{for(f.s();!(u=f.n()).done;){if(o===u.value){t[r][i.indexOf(o)]="The invigilator cannot be the same",t[m][d.indexOf(o)]="The invigilator cannot be the same",l=!0;break}}}catch(g){f.e(g)}finally{f.f()}}}}catch(g){c.e(g)}finally{c.f()}if(l)break}return t},s=function(e){var t={};return e.letterTemplate||(t.letterTemplate="Please select the letter template"),t}},840:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=[{id:"01",title:"Pentaksiran Tingkatan 3 (PT3)",value:"PT3"},{id:"02",title:"Sijil Pelajaran Malaysia (SPM)",value:"SPM"},{id:"03",title:"Sijil Tinggi Persekolahan Malaysia (STPM)",value:"STPM"}]}}]);
//# sourceMappingURL=22.54682092.chunk.js.map