(this["webpackJsonpgull-react"]=this["webpackJsonpgull-react"]||[]).push([[17],{1554:function(e,t,a){"use strict";a.r(t);var n=a(4),o=a.n(n),l=a(11),c=a(0),r=a.n(c),s=a(12),m=a(36),i=a(114),d=a(627),u=a(1562),h=a(789),p=a(1559),f=a(575),E=a.n(f),g=a(2),N=a.n(g),v=a(555),x=a(553),b=a(850),C=a(562),y=a(851),P=a(647),S=a(108),w=a(7),k=a(648),I=Object(h.a)("EditSchoolInformation");t.default=Object(m.b)((function(e){return{showModal:e.editSchoolInformation.showModal,schools:e.editSchoolInformation.schools,initialValues:e.editSchoolInformation.selectedSchool,schoolCode:I(e,"schoolCode"),httpError:e.error.error,loading:e.loading.loading}}),{toggleSchoolListModal:S.d,initializeForm:S.c,resetError:w.c,setError:w.d})(Object(p.a)({form:"EditSchoolInformation",validate:P.b,enableReinitialize:!0})((function(e){var t=Object(s.h)().schoolId,a=Object(s.g)();Object(c.useEffect)((function(){e.initializeForm(t)}),[]);return r.a.createElement("div",null,e.loading&&r.a.createElement(v.a,null),r.a.createElement(x.a,{error:e.httpError,onConfirm:e.resetError}),r.a.createElement(i.a,{routeSegments:[{name:"Schools & Exam Centers",path:"/examcenter"},{name:"School List",path:"/school/list"},{name:"Edit School Information"}]}),r.a.createElement("div",{className:"2-columns-form-layout"},r.a.createElement("div",{className:""},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header bg-transparent"},r.a.createElement("h3",{className:"card-title"}," Edit School Information")),r.a.createElement("form",{onSubmit:e.handleSubmit((function(n){E.a.fire({title:"Save Changes...",onBeforeOpen:function(){E.a.showLoading()},onOpen:function(){var c=Object(l.a)(o.a.mark((function l(){return o.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,N()({method:"PATCH",url:"".concat("https://peia-iam.herokuapp.com/api","/schools/").concat(t),data:n}).then((function(e){E.a.hideLoading(),E.a.fire({title:"Successfully Edit School Information",icon:"success",html:"Successful saved the changes",allowOutsideClick:!1}).then((function(e){a.push("/school/list")}))}));case 3:o.next=8;break;case 5:o.prev=5,o.t0=o.catch(0),e.setError(o.t0);case 8:case"end":return o.stop()}}),l,null,[[0,5]])})));return function(){return c.apply(this,arguments)}}(),allowOutsideClick:!1})}))},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row"},r.a.createElement(u.a,{className:"col-md-6",type:"text",name:"schoolCode",placeholder:"School Code",helpText:"Please enter an unique school code",component:C.d}),r.a.createElement("div",{className:"col-md-6 "},r.a.createElement(y.a,{items:e.schools,toggleModal:e.toggleSchoolListModal,showModal:e.showModal}),r.a.createElement(d.a,{className:"text-capitalize btn btn-dark ms-2",onClick:function(){if(e.schoolCode)if(e.schoolCode===e.initialValues.schoolCode)E.a.fire("Same school code","The school code is same before changes","info");else{Object(k.b)(e.schools,e.schoolCode)?E.a.fire("Unique","The school code - ".concat(e.schoolCode," is unique"),"success"):E.a.fire("Not Unique","The school code - ".concat(e.schoolCode," is not unique"),"error")}else E.a.fire("No school code is entered","Please enter the school code first","warning")}},"Check Uniqueness"))),r.a.createElement("div",{className:"custom-separator"}),r.a.createElement("div",{className:"row"},r.a.createElement(u.a,{className:"col-md-6",type:"text",name:"schoolName",placeholder:"School Name",helpText:"Please enter the school name",component:C.d}),r.a.createElement(u.a,{className:"col-md-6",type:"text",name:"schoolAddress",placeholder:"School Address",helpText:"Please enter the school address",component:C.d})),r.a.createElement("div",{className:"custom-separator"}),r.a.createElement("div",{className:"row"},r.a.createElement(u.a,{className:"col-md-6",type:"text",name:"postcode",placeholder:"Postcode",helpText:"Please enter the postcode",component:C.d}),r.a.createElement(u.a,{className:"col-md-6",type:"text",name:"city",placeholder:"City",helpText:"Please enter the city",component:C.d})),r.a.createElement("div",{className:"custom-separator"}),r.a.createElement("div",{className:"row"},r.a.createElement(u.a,{className:"col-md-6",type:"text",name:"stateCode",placeholder:"State Code",helpText:"Please enter the state code",component:C.d}),r.a.createElement(u.a,{className:"col-md-6",type:"text",name:"areaCode",placeholder:"Area Code",helpText:"Please enter the area code",component:C.d})),r.a.createElement("div",{className:"custom-separator"}),r.a.createElement("div",{className:"row"},r.a.createElement(u.a,{className:"col-md-6",type:"text",name:"taxNumber",placeholder:"Tax Number",helpText:"Please enter the Tax Number",component:C.d}),r.a.createElement(u.a,{className:"col-md-6",name:"typeOfSchool",items:b.a,helpText:"Please select the type of school",defaultOption:"Please select type of school...",component:C.f})),r.a.createElement("div",{className:"custom-separator"}),r.a.createElement("div",{className:"row"},r.a.createElement(u.a,{className:"col-md-6",type:"text",name:"codeDun",placeholder:"Code DUN",helpText:"Please enter the code DUN",component:C.d}),r.a.createElement(u.a,{className:"col-md-6",type:"text",name:"codeParlimen",placeholder:"Code Parlimen",helpText:"Please enter the code Parlimen",component:C.d})),r.a.createElement("div",{className:"custom-separator"}),r.a.createElement("div",{className:"row"},r.a.createElement(u.a,{className:"col-md-6",type:"text",name:"schoolPhoneNumber",placeholder:"Phone Number",helpText:"Please enter the school phone number",component:C.d}),r.a.createElement(u.a,{className:"col-md-6",type:"email",name:"schoolEmailAddress",placeholder:"Email Address",helpText:"Please enter the school email address",component:C.d})),r.a.createElement("div",{className:"custom-separator"})),r.a.createElement("div",{className:"card-footer"},r.a.createElement("div",{className:"mc-footer"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("button",{type:"submit",className:"btn btn-primary m-1"},"Save Changes"))))))))))))})))},553:function(e,t,a){"use strict";var n=a(0),o=a.n(n),l=a(569),c=a.n(l);t.a=function(e){return o.a.createElement(c.a,{show:!!e.error,title:"An Error Occured",type:"error",text:e.error?e.error.response?e.error.response.data.message:e.error.message:"",onConfirm:function(){return e.onConfirm()}})}},555:function(e,t,a){"use strict";var n=a(0),o=a.n(n),l={position:"fixed",left:0,right:0,top:"calc(50% - 20px)",margin:"auto",height:"40px",width:"40px",zIndex:324324324},c={position:"fixed",left:0,top:0,height:"100%",width:"100%",zIndex:324324323,backgroundColor:"white"};t.a=function(){return o.a.createElement("div",{style:c},o.a.createElement("div",{style:l},o.a.createElement("div",{className:"spinner spinner-bubble spinner-bubble-primary"})))}},558:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=[{id:"01",title:"Assignment Task Title",value:"title"},{id:"02",title:"Exam Type",value:"examType"},{id:"04",title:"Assigned Exam Center Name",value:"assignmentResults[assignmentResultIndex].results[resultIndex].examCenter.school.schoolName"},{id:"05",title:"Assigned School Code",value:"assignmentResults[assignmentResultIndex].results[resultIndex].examCenter.school.schoolCode"},{id:"06",title:"Assigned Exam Center Code",value:"assignmentResults[assignmentResultIndex].results[resultIndex].examCenter.examCenterCode"},{id:"07",title:"Role",value:"assignmentResults[assignmentResultIndex].role"},{id:"08",title:"Invigilator Name",value:"assignmentResults[assignmentResultIndex].results[resultIndex].invigilators[invigilatorIndex].teacherName"},{id:"09",title:"Invigilator IC",value:"assignmentResults[assignmentResultIndex].results[resultIndex].invigilators[invigilatorIndex].icNumber"}]},562:function(e,t,a){"use strict";a.d(t,"d",(function(){return h})),a.d(t,"f",(function(){return p})),a.d(t,"c",(function(){return f})),a.d(t,"g",(function(){return E})),a.d(t,"a",(function(){return N})),a.d(t,"e",(function(){return v})),a.d(t,"h",(function(){return b})),a.d(t,"b",(function(){return C}));var n=a(6),o=a(0),l=a.n(o),c=a(584),r=a.n(c),s=a(114),m=a(1562),i=a(558),d=a(1560),u=function(e){if(e.touched&&e.error)return l.a.createElement("div",{className:"text-danger mt-1 ml-2"},e.error)},h=function(e){return l.a.createElement("div",{className:"form-group ".concat(e.className||"")},l.a.createElement("input",Object.assign({readOnly:e.readOnly,type:e.type},e.input,{placeholder:e.placeholder,className:"form-control"})),l.a.createElement("small",{className:"ul-form__text form-text "},e.helpText),u(e.meta))},p=function(e){return l.a.createElement("div",{className:"form-group ".concat(e.className||"")},l.a.createElement("select",Object.assign({className:"form-control"},e.input,{onChange:e.input.onChange}),l.a.createElement("option",{value:""},e.defaultOption),e.items.map((function(e){return l.a.createElement("option",{key:e.id,value:e.value},e.title)}))),l.a.createElement("small",{className:"ul-form__text form-text "},e.helpText),u(e.meta))},f=function(e){return l.a.createElement("div",{className:"form-group ".concat(e.className||"")},l.a.createElement(r.a,{name:e.name,closeOnSelect:!0,onChange:e.input.onChange,isValidDate:e.isValidDate,timeFormat:"HH:mm",dateFormat:"DD/MM/YYYY",placeholder:e.placeholder,value:e.input.value}),l.a.createElement("small",{className:"ul-form__text form-text "},e.helpText),u(e.meta))},E=function(e){return l.a.createElement("div",{className:"form-group ".concat(e.className||"")},l.a.createElement("label",{className:"ul-form__label"},"Exam Centers: "),l.a.createElement("div",{className:"row"},e.items.map((function(t,a){return l.a.createElement("div",{className:"form-group col-md-6",key:a},l.a.createElement("label",{className:"checkbox checkbox-primary"},l.a.createElement("input",{type:"checkbox",name:"".concat(e.input.name,"[").concat(a,"]"),value:t.id,checked:-1!==e.input.value.indexOf(t.id),onChange:function(a){var o=Object(n.a)(e.input.value);return a.target.checked?o.push(t.id):o.splice(o.indexOf(t.id),1),e.input.onChange(o)}}),l.a.createElement("span",null,"".concat(t.school.schoolCode," - ").concat(t.examCenterCode," - ").concat(t.school.schoolName)),l.a.createElement("span",{className:"checkmark"})))}))),u(e.meta))},g=function(e){return l.a.createElement("div",{className:"form-group ".concat(e.className||"")},l.a.createElement("select",Object.assign({},e.input,{className:"form-control",onChange:e.input.onChange}),e.options.map((function(t){return t.user.school.id!==e.assigningSchoolId&&l.a.createElement("option",{key:t.id,value:t.id},"".concat(t.teacherName," - ").concat(t.user.school.schoolCode))}))),u(e.meta))},N=function(e){return l.a.createElement("div",{className:"col-md-4"},l.a.createElement("label",{className:"ul-form__label"},e.label),l.a.createElement("div",{className:"row"},e.fields.map((function(t,a){return l.a.createElement(m.a,{key:t,className:"col-lg-12",name:t,options:e.options,assigningSchoolId:e.schoolId,component:g})}))))},v=function(e){return l.a.createElement("div",{className:"col-md-12"},l.a.createElement(s.e,{title:e.title,subtitle:e.subtitle},l.a.createElement(s.d,Object.assign({},e.input,{content:e.input.value,handleContentChange:e.input.onChange,placeholder:e.placeholder}))),u(e.meta))},x=function(e){return l.a.createElement("div",{className:"form-group ".concat(e.className||"")},l.a.createElement("div",{className:"row"},l.a.createElement("label",{className:"ul-form__label ul-form--margin col-lg-1 col-form-label "},e.label),l.a.createElement("div",{className:"col-lg-8"},l.a.createElement("select",Object.assign({className:"form-control"},e.input,{onChange:e.input.onChange}),l.a.createElement("option",{value:""},e.defaultOption),e.items.map((function(e){return l.a.createElement("option",{key:e.id,value:e.value},e.title)})))),l.a.createElement("div",{className:"col-lg-3"},l.a.createElement("button",{type:"button",className:"btn btn-danger m-1",onClick:function(){var t="&lt;"+(e.index+1)+"&gt;",a=e.letterContent.replace(t,"");if(e.index<e.fieldLength)for(var n=e.index+1;n<e.fieldLength;n++){var o="&lt;"+(n+1)+"&gt;",l="&lt;"+n+"&gt;";a=a.replace(o,l)}e.changeFunction("content",a),e.onRemoveTag(e.index)}},"Remove Tag"))),u(e.meta))},b=function(e){return l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-12"},l.a.createElement("button",{type:"button",className:"btn btn-outline-secondary m-1",onClick:function(){var t;e.fields.push({}),t=e.letterContent?e.letterContent+"&lt;"+(e.fields.length+1)+"&gt;":"&lt;"+(e.fields.length+1)+"&gt;",e.changeFunction("content",t)}},"Add New Tag")),l.a.createElement("div",{className:"custom-separator"}),e.fields.map((function(t,a){return l.a.createElement(m.a,{key:a,className:"col-md-12",label:"<".concat(a+1,">"),name:"".concat(t,".value"),component:x,defaultOption:"Please select a field",onRemoveTag:e.fields.remove,changeFunction:e.changeFunction,letterContent:e.letterContent,index:a,fieldLength:e.fields.length,items:i.a})})))},C=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.a.Check,Object.assign({type:"radio",label:e.label},e.input,{value:e.radioValue})),u(e.meta))}},647:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return o}));var n=function(e){var t={};return e.examCenterCode||(t.examCenterCode="Please enter the exam center code"),e.safeRoomNo||(t.safeRoomNo="Please enter the safe room number"),t},o=function(e){var t={};return e.schoolCode||(t.schoolCode="Please enter the school code"),e.schoolName||(t.schoolName="Please enter the school name"),e.schoolAddress||(t.schoolAddress="Please enter the school address"),e.postcode||(t.postcode="Please enter the postcode"),e.city||(t.city="Please enter the city"),e.stateCode||(t.stateCode="Please enter the state code"),e.areaCode||(t.areaCode="Please enter the area code"),e.taxNumber||(t.taxNumber="Please enter the tax number"),e.typeOfSchool||(t.typeOfSchool="Please select the type of school"),e.codeDun||(t.codeDun="Please enter the code DUN"),e.codeParlimen||(t.codeParlimen="Please enter the code Parlimen"),e.schoolPhoneNumber||(t.schoolPhoneNumber="Please enter the school's phone number"),e.schoolEmailAddress?/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e.schoolEmailAddress)||(t.schoolEmailAddress="Please enter a valid school's email address"):t.schoolEmailAddress="Please enter the school's email address",t}},648:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return o}));var n=function(e,t){return!e.find((function(e){return e.schoolCode===t}))},o=function(e,t){return!e.find((function(e){return e.examCenterCode===t}))}},850:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=[{id:"01",title:"Public School",value:"Public School"},{id:"02",title:"International School",value:"International School"},{id:"03",title:"Private School",value:"Private School"},{id:"04",title:"Vernacular School",value:"Vernacular School"}]},851:function(e,t,a){"use strict";var n=a(0),o=a.n(n),l=a(627),c=a(953);t.a=function(e){return o.a.createElement(n.Fragment,null,o.a.createElement(l.a,{className:"text-capitalize btn btn-dark",onClick:function(){return e.toggleModal(!0)}},"All registered schools"),o.a.createElement(c.a,{show:e.showModal,onHide:function(){return e.toggleModal(!1)},size:"lg",scrollable:!0},o.a.createElement(c.a.Header,{closeButton:!0},o.a.createElement(c.a.Title,null)),o.a.createElement(c.a.Body,null,o.a.createElement("div",{className:"row mb-4"},o.a.createElement("div",{className:"col-md-12 mb-4"},o.a.createElement("div",{className:"text-left p-1"},o.a.createElement("div",{className:"p-3"},o.a.createElement("h4",{className:"mb-2"},"Registered Schools"),o.a.createElement("ul",{className:"list-group"},e.items.map((function(e){return o.a.createElement("li",{className:"list-group-item",key:e.id},"".concat(e.schoolCode," - ").concat(e.schoolName," - ").concat(e.examCenters.length," exam center(s)"))})))))))),o.a.createElement(c.a.Footer,null,o.a.createElement(l.a,{variant:"secondary",onClick:function(){e.toggleModal(!1)}},"Close"))))}}}]);
//# sourceMappingURL=17.42920298.chunk.js.map