(this["webpackJsonpgull-react"]=this["webpackJsonpgull-react"]||[]).push([[21],{1079:function(e,t,n){"use strict";var r=n(58),a=n.n(r),i=n(628),s=n.n(i),o=n(595),l=n.n(o),c=n(0),u=n.n(c),m=n(18),d=n.n(m),f=n(88),p=n.n(f),g=n(87),h=n.n(g),v=n(644),y=n.n(v),b=n(36),E=n(54);var x=n(33),C=n(629),N=["_reduxForm","value"];function R(e){var t=e.deepEqual,n=e.getIn,r=e.size,i=e.equals,o=e.orderChanged,m=function(r){function m(){for(var e,t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return(e=r.call.apply(r,[this].concat(a))||this).ref=u.a.createRef(),e.getValue=function(t){return e.props.value&&n(e.props.value,String(t))},e}l()(m,r);var d=m.prototype;return d.shouldComponentUpdate=function(e){var n=this,r=this.props.value,a=e.value;if(r&&a){var s=i(a,r),l=o(r,a);if((r.length||r.size)!==(a.length||a.size)||s&&l||e.rerenderOnEveryChange&&r.some((function(e,n){return!t(e,a[n])})))return!0}var c=Object.keys(e),u=Object.keys(this.props);return!!(this.props.children||e.children||c.length!==u.length||c.some((function(r){return!~N.indexOf(r)&&!t(n.props[r],e[r])})))},d.getRenderedComponent=function(){return this.ref.current},d.render=function(){var t=this.props,n=t.component,r=t.forwardRef,i=t.name,s=t._reduxForm,o=(t.validate,t.warn,t.rerenderOnEveryChange,h()(t,["component","forwardRef","name","_reduxForm","validate","warn","rerenderOnEveryChange"])),l=function(e,t,n,r,i,s){var o=e.getIn,l=s.arrayInsert,c=s.arrayMove,u=s.arrayPop,m=s.arrayPush,d=s.arrayRemove,f=s.arrayRemoveAll,p=s.arrayShift,g=s.arraySplice,v=s.arraySwap,y=s.arrayUnshift,b=s.asyncError,E=s.dirty,x=s.length,C=s.pristine,N=s.submitError,R=(s.state,s.submitFailed),O=s.submitting,k=s.syncError,w=s.syncWarning,A=s.value,I=s.props,F=h()(s,["arrayInsert","arrayMove","arrayPop","arrayPush","arrayRemove","arrayRemoveAll","arrayShift","arraySplice","arraySwap","arrayUnshift","asyncError","dirty","length","pristine","submitError","state","submitFailed","submitting","syncError","syncWarning","value","props"]),T=k||b||N,_=w,j=r?t.replace(r+".",""):t,S=a()({fields:{_isFieldArray:!0,forEach:function(e){return(A||[]).forEach((function(t,n){return e(j+"["+n+"]",n,S.fields)}))},get:i,getAll:function(){return A},insert:l,length:x,map:function(e){return(A||[]).map((function(t,n){return e(j+"["+n+"]",n,S.fields)}))},move:c,name:t,pop:function(){return u(),o(A,String(x-1))},push:m,reduce:function(e,t){return(A||[]).reduce((function(t,n,r){return e(t,j+"["+r+"]",r,S.fields)}),t)},remove:d,removeAll:f,shift:function(){return p(),o(A,"0")},splice:g,swap:v,unshift:y},meta:{dirty:E,error:T,form:n,warning:_,invalid:!!T,pristine:C,submitting:O,submitFailed:R,valid:!T}},I,{},F);return S}(e,i,s.form,s.sectionPrefix,this.getValue,o);return r&&(l.ref=this.ref),Object(c.createElement)(n,l)},s()(m,[{key:"dirty",get:function(){return this.props.dirty}},{key:"pristine",get:function(){return this.props.pristine}},{key:"value",get:function(){return this.props.value}}]),m}(c.Component);return m.propTypes={component:C.a,props:d.a.object,rerenderOnEveryChange:d.a.bool},m.defaultProps={rerenderOnEveryChange:!1},Object(b.b)((function(e,a){var i=a.name,s=a._reduxForm,o=s.initialValues,l=(0,s.getFormState)(e),c=n(l,"initial."+i)||o&&n(o,i),u=n(l,"values."+i),m=n(l,"submitting"),d=function(e,t){return x.a.getIn(e,t+"._error")}(n(l,"syncErrors"),i),f=function(e,t){return n(e,t+"._warning")}(n(l,"syncWarnings"),i),p=t(u,c);return{asyncError:n(l,"asyncErrors."+i+"._error"),dirty:!p,pristine:p,state:n(l,"fields."+i),submitError:n(l,"submitErrors."+i+"._error"),submitFailed:n(l,"submitFailed"),submitting:m,syncError:d,syncWarning:f,value:u,length:r(u)}}),(function(e,t){var n=t.name,r=t._reduxForm,a=r.arrayInsert,i=r.arrayMove,s=r.arrayPop,o=r.arrayPush,l=r.arrayRemove,c=r.arrayRemoveAll,u=r.arrayShift,m=r.arraySplice,d=r.arraySwap,f=r.arrayUnshift;return y()({arrayInsert:a,arrayMove:i,arrayPop:s,arrayPush:o,arrayRemove:l,arrayRemoveAll:c,arrayShift:u,arraySplice:m,arraySwap:d,arrayUnshift:f},(function(t){return Object(E.b)(t.bind(null,n),e)}))}),void 0,{forwardRef:!0})(m)}var O=n(786),k=n(705),w=function(e){return Array.isArray(e)?e:[e]},A=function(e,t){return e&&function(){for(var n=w(e),r=0;r<n.length;r++){var a,i=n[r].apply(n,arguments);if(i)return(a={})[t]=i,a}}};t.a=function(e){var t=R(e),n=function(e){function n(t){var n;if((n=e.call(this,t)||this).ref=u.a.createRef(),!t._reduxForm)throw new Error("FieldArray must be inside a component decorated with reduxForm()");return n}l()(n,e);var r=n.prototype;return r.componentDidMount=function(){var e=this;this.props._reduxForm.register(this.name,"FieldArray",(function(){return A(e.props.validate,"_error")}),(function(){return A(e.props.warn,"_warning")}))},r.UNSAFE_componentWillReceiveProps=function(e){var t=Object(O.a)(this.props,this.props.name),n=Object(O.a)(e,e.name);t!==n&&(this.props._reduxForm.unregister(t),this.props._reduxForm.register(n,"FieldArray"))},r.componentWillUnmount=function(){this.props._reduxForm.unregister(this.name)},r.getRenderedComponent=function(){return p()(this.props.forwardRef,"If you want to access getRenderedComponent(), you must specify a forwardRef prop to FieldArray"),this.ref&&this.ref.current.getRenderedComponent()},r.render=function(){return Object(c.createElement)(t,a()({},this.props,{name:this.name,ref:this.ref}))},s()(n,[{key:"name",get:function(){return Object(O.a)(this.props,this.props.name)}},{key:"dirty",get:function(){return!this.ref||this.ref.current.dirty}},{key:"pristine",get:function(){return!(!this.ref||!this.ref.current.pristine)}},{key:"value",get:function(){return this.ref?this.ref.current.value:void 0}}]),n}(c.Component);return n.propTypes={name:d.a.string.isRequired,component:C.a,props:d.a.object,validate:d.a.oneOfType([d.a.func,d.a.arrayOf(d.a.func)]),warn:d.a.oneOfType([d.a.func,d.a.arrayOf(d.a.func)]),forwardRef:d.a.bool,_reduxForm:d.a.object},Object(k.b)(n)}(x.a)},1548:function(e,t,n){"use strict";n.r(t);var r=n(4),a=n.n(r),i=n(6),s=n(11),o=n(0),l=n.n(o),c=n(36),u=n(114),m=n(12),d=n(1079),f=n(1559),p=n(25),g=n.n(p),h=n(575),v=n.n(h),y=n(2),b=n.n(y),E=n(555),x=n(553),C=n(562),N=n(150),R=n(645),O=n(7);t.default=Object(c.b)((function(e){var t={};return e.editAssignmentResult.assignmentResult.results&&e.editAssignmentResult.assignmentResult.results.forEach((function(e){var n="result"+e.examCenter.id;t[n]=e.invigilators.map((function(e){return e.id}))})),{initialValues:t,assignmentTask:e.editAssignmentResult.assignmentResult.assignmentTask?e.editAssignmentResult.assignmentResult.assignmentTask:{},assignmentResult:e.editAssignmentResult.assignmentResult,involvedInvigilators:e.editAssignmentResult.invigilators,httpError:e.error.error,loading:e.loading.loading}}),{initializeForm:N.b,resetError:O.c,setError:O.d})(Object(f.a)({form:"EditAssignmentResult",validate:R.a,enableReinitialize:!0})((function(e){var t=Object(m.g)(),n=Object(m.h)().taskId,r=Object(m.h)().role;return Object(o.useEffect)((function(){e.initializeForm(r,n)}),[]),l.a.createElement("div",null,e.loading&&l.a.createElement(E.a,null),l.a.createElement(x.a,{error:e.httpError,onConfirm:e.resetError}),l.a.createElement(u.a,{routeSegments:[{name:"Assignment Tasks",path:"/assignment"},{name:"Assignment Tasks List",path:"/assignment/list"},{name:e.assignmentTask.title,path:"/assignment/".concat(n)},{name:"Edit Assignment Result"}]}),l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-header bg-transparent"},l.a.createElement("h3",{className:"card-title"},"Edit Assignment Result : ",g.a.startCase(r))),l.a.createElement("form",{onSubmit:e.handleSubmit((function(r){v.a.fire({title:"Saving Changes...",onBeforeOpen:function(){v.a.showLoading()},onOpen:function(){var o=Object(s.a)(a.a.mark((function s(){var o,l,c;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:for(l in a.prev=0,o=[],r)c=l.slice(6),o=[].concat(Object(i.a)(o),[{examCenter:c,invigilators:r[l]}]);return a.next=5,b()({method:"PATCH",url:"".concat("https://peia-iam.herokuapp.com/api","/results/").concat(e.assignmentResult.id),data:{results:o}}).then((function(e){v.a.hideLoading(),v.a.fire({title:"Successfully Edit Assignment Result",icon:"success",allowOutsideClick:!1}).then((function(e){t.push("/assignment/".concat(n))}))}));case 5:a.next=11;break;case 7:a.prev=7,a.t0=a.catch(0),v.a.hideLoading(),e.setError(a.t0);case 11:case"end":return a.stop()}}),s,null,[[0,7]])})));return function(){return o.apply(this,arguments)}}(),allowOutsideClick:!1})}))},l.a.createElement("div",{className:"card-body"},l.a.createElement("div",{className:"row"},e.assignmentResult.results&&e.assignmentResult.results.map((function(t,n){var r="".concat(e.assignmentResult.results[n].examCenter.school.schoolCode," - ").concat(e.assignmentResult.results[n].examCenter.examCenterCode," - ").concat(e.assignmentResult.results[n].examCenter.school.schoolName);return l.a.createElement(d.a,{key:n,name:"result".concat(t.examCenter.id),options:e.involvedInvigilators,label:r,component:C.a,schoolId:t.examCenter.school.id})})))),l.a.createElement("div",{className:"card-footer"},l.a.createElement("div",{className:"mc-footer"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-12"},l.a.createElement("button",{type:"submit",className:"btn  btn-primary m-1"},"Save Changes"))))))))})))},553:function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(569),s=n.n(i);t.a=function(e){return a.a.createElement(s.a,{show:!!e.error,title:"An Error Occured",type:"error",text:e.error?e.error.response?e.error.response.data.message:e.error.message:"",onConfirm:function(){return e.onConfirm()}})}},555:function(e,t,n){"use strict";var r=n(0),a=n.n(r),i={position:"fixed",left:0,right:0,top:"calc(50% - 20px)",margin:"auto",height:"40px",width:"40px",zIndex:324324324},s={position:"fixed",left:0,top:0,height:"100%",width:"100%",zIndex:324324323,backgroundColor:"white"};t.a=function(){return a.a.createElement("div",{style:s},a.a.createElement("div",{style:i},a.a.createElement("div",{className:"spinner spinner-bubble spinner-bubble-primary"})))}},558:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=[{id:"01",title:"Assignment Task Title",value:"title"},{id:"02",title:"Exam Type",value:"examType"},{id:"04",title:"Assigned Exam Center Name",value:"assignmentResults[assignmentResultIndex].results[resultIndex].examCenter.school.schoolName"},{id:"05",title:"Assigned School Code",value:"assignmentResults[assignmentResultIndex].results[resultIndex].examCenter.school.schoolCode"},{id:"06",title:"Assigned Exam Center Code",value:"assignmentResults[assignmentResultIndex].results[resultIndex].examCenter.examCenterCode"},{id:"07",title:"Role",value:"assignmentResults[assignmentResultIndex].role"},{id:"08",title:"Invigilator Name",value:"assignmentResults[assignmentResultIndex].results[resultIndex].invigilators[invigilatorIndex].teacherName"},{id:"09",title:"Invigilator IC",value:"assignmentResults[assignmentResultIndex].results[resultIndex].invigilators[invigilatorIndex].icNumber"}]},562:function(e,t,n){"use strict";n.d(t,"d",(function(){return f})),n.d(t,"f",(function(){return p})),n.d(t,"c",(function(){return g})),n.d(t,"g",(function(){return h})),n.d(t,"a",(function(){return y})),n.d(t,"e",(function(){return b})),n.d(t,"h",(function(){return x})),n.d(t,"b",(function(){return C}));var r=n(6),a=n(0),i=n.n(a),s=n(584),o=n.n(s),l=n(114),c=n(1562),u=n(558),m=n(1560),d=function(e){if(e.touched&&e.error)return i.a.createElement("div",{className:"text-danger mt-1 ml-2"},e.error)},f=function(e){return i.a.createElement("div",{className:"form-group ".concat(e.className||"")},i.a.createElement("input",Object.assign({readOnly:e.readOnly,type:e.type},e.input,{placeholder:e.placeholder,className:"form-control"})),i.a.createElement("small",{className:"ul-form__text form-text "},e.helpText),d(e.meta))},p=function(e){return i.a.createElement("div",{className:"form-group ".concat(e.className||"")},i.a.createElement("select",Object.assign({className:"form-control"},e.input,{onChange:e.input.onChange}),i.a.createElement("option",{value:""},e.defaultOption),e.items.map((function(e){return i.a.createElement("option",{key:e.id,value:e.value},e.title)}))),i.a.createElement("small",{className:"ul-form__text form-text "},e.helpText),d(e.meta))},g=function(e){return i.a.createElement("div",{className:"form-group ".concat(e.className||"")},i.a.createElement(o.a,{name:e.name,closeOnSelect:!0,onChange:e.input.onChange,isValidDate:e.isValidDate,timeFormat:"HH:mm",dateFormat:"DD/MM/YYYY",placeholder:e.placeholder,value:e.input.value}),i.a.createElement("small",{className:"ul-form__text form-text "},e.helpText),d(e.meta))},h=function(e){return i.a.createElement("div",{className:"form-group ".concat(e.className||"")},i.a.createElement("label",{className:"ul-form__label"},"Exam Centers: "),i.a.createElement("div",{className:"row"},e.items.map((function(t,n){return i.a.createElement("div",{className:"form-group col-md-6",key:n},i.a.createElement("label",{className:"checkbox checkbox-primary"},i.a.createElement("input",{type:"checkbox",name:"".concat(e.input.name,"[").concat(n,"]"),value:t.id,checked:-1!==e.input.value.indexOf(t.id),onChange:function(n){var a=Object(r.a)(e.input.value);return n.target.checked?a.push(t.id):a.splice(a.indexOf(t.id),1),e.input.onChange(a)}}),i.a.createElement("span",null,"".concat(t.school.schoolCode," - ").concat(t.examCenterCode," - ").concat(t.school.schoolName)),i.a.createElement("span",{className:"checkmark"})))}))),d(e.meta))},v=function(e){return i.a.createElement("div",{className:"form-group ".concat(e.className||"")},i.a.createElement("select",Object.assign({},e.input,{className:"form-control",onChange:e.input.onChange}),e.options.map((function(t){return t.user.school.id!==e.assigningSchoolId&&i.a.createElement("option",{key:t.id,value:t.id},"".concat(t.teacherName," - ").concat(t.user.school.schoolCode))}))),d(e.meta))},y=function(e){return i.a.createElement("div",{className:"col-md-4"},i.a.createElement("label",{className:"ul-form__label"},e.label),i.a.createElement("div",{className:"row"},e.fields.map((function(t,n){return i.a.createElement(c.a,{key:t,className:"col-lg-12",name:t,options:e.options,assigningSchoolId:e.schoolId,component:v})}))))},b=function(e){return i.a.createElement("div",{className:"col-md-12"},i.a.createElement(l.e,{title:e.title,subtitle:e.subtitle},i.a.createElement(l.d,Object.assign({},e.input,{content:e.input.value,handleContentChange:e.input.onChange,placeholder:e.placeholder}))),d(e.meta))},E=function(e){return i.a.createElement("div",{className:"form-group ".concat(e.className||"")},i.a.createElement("div",{className:"row"},i.a.createElement("label",{className:"ul-form__label ul-form--margin col-lg-1 col-form-label "},e.label),i.a.createElement("div",{className:"col-lg-8"},i.a.createElement("select",Object.assign({className:"form-control"},e.input,{onChange:e.input.onChange}),i.a.createElement("option",{value:""},e.defaultOption),e.items.map((function(e){return i.a.createElement("option",{key:e.id,value:e.value},e.title)})))),i.a.createElement("div",{className:"col-lg-3"},i.a.createElement("button",{type:"button",className:"btn btn-danger m-1",onClick:function(){var t="&lt;"+(e.index+1)+"&gt;",n=e.letterContent.replace(t,"");if(e.index<e.fieldLength)for(var r=e.index+1;r<e.fieldLength;r++){var a="&lt;"+(r+1)+"&gt;",i="&lt;"+r+"&gt;";n=n.replace(a,i)}e.changeFunction("content",n),e.onRemoveTag(e.index)}},"Remove Tag"))),d(e.meta))},x=function(e){return i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-12"},i.a.createElement("button",{type:"button",className:"btn btn-outline-secondary m-1",onClick:function(){var t;e.fields.push({}),t=e.letterContent?e.letterContent+"&lt;"+(e.fields.length+1)+"&gt;":"&lt;"+(e.fields.length+1)+"&gt;",e.changeFunction("content",t)}},"Add New Tag")),i.a.createElement("div",{className:"custom-separator"}),e.fields.map((function(t,n){return i.a.createElement(c.a,{key:n,className:"col-md-12",label:"<".concat(n+1,">"),name:"".concat(t,".value"),component:E,defaultOption:"Please select a field",onRemoveTag:e.fields.remove,changeFunction:e.changeFunction,letterContent:e.letterContent,index:n,fieldLength:e.fields.length,items:u.a})})))},C=function(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement(m.a.Check,Object.assign({type:"radio",label:e.label},e.input,{value:e.radioValue})),d(e.meta))}},645:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return s}));var r=n(53),a=function(e){var t={};return e.title||(t.title="Please enter the title"),e.examType&&""!==e.examType||(t.examType="Please select the exam type"),e.collectionDate||(t.collectionDate="Please select the deadline of data collection"),(!e.examCenters||e.examCenters.length<=1)&&(t.examCenters="Must select at least two exam center"),t},i=function(e){var t={};for(var n in e)t[n]=new Array(e[n].length);var a=!1;for(var i in e){var s,o=e[i],l=Object(r.a)(o);try{for(l.s();!(s=l.n()).done;){var c=s.value;if(o.indexOf(c)!==o.lastIndexOf(c)){t[i][o.indexOf(c)]="The invigilator cannot be the same",t[i][o.lastIndexOf(c)]="The invigilator cannot be the same",a=!0;break}for(var u in e)if(u!==i){var m,d=e[u],f=Object(r.a)(d);try{for(f.s();!(m=f.n()).done;){if(c===m.value){t[i][o.indexOf(c)]="The invigilator cannot be the same",t[u][d.indexOf(c)]="The invigilator cannot be the same",a=!0;break}}}catch(p){f.e(p)}finally{f.f()}}}}catch(p){l.e(p)}finally{l.f()}if(a)break}return t},s=function(e){var t={};return e.letterTemplate||(t.letterTemplate="Please select the letter template"),t}}}]);
//# sourceMappingURL=21.b0aa7540.chunk.js.map